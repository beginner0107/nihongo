# UI/UX ëŒ€ê·œëª¨ ê°œí¸ ê³„íšì„œ

> **ëª©í‘œ**: ê²Œì„í™”, ë°ì´í„° ì‹œê°í™”, ì†Œì…œ ê¸°ëŠ¥ì„ í†µí•œ í•™ìŠµ ë™ê¸° ë¶€ì—¬ ë° ì‚¬ìš©ì ê²½í—˜ í˜ì‹ 

## ğŸ‰ ì§„í–‰ ìƒí™© (2025-11-12 ì—…ë°ì´íŠ¸)

### ì™„ë£Œëœ Phase
- âœ… **Phase 2: í€˜ìŠ¤íŠ¸/ë¯¸ì…˜ ì‹œìŠ¤í…œ** (100% ì™„ë£Œ)
  - Part 1: Backend êµ¬í˜„ (Database, Repository, Domain Models)
  - Part 2: UI êµ¬í˜„ (QuestCard, QuestSection, HomeScreen í†µí•©)
  - Part 3: ìë™ ì§„í–‰ë¥  ì¶”ì  (ChatViewModel í†µí•©, ìë™ ì™„ë£Œ ê°ì§€)

### ì§„í–‰ ì¤‘ì¸ Phase
- ğŸš§ **Phase 1: í™ˆ ëŒ€ì‹œë³´ë“œ í˜ì‹ ** (ë¶€ë¶„ ì™„ë£Œ)
  - âœ… TodayLearningCard (ì§„í–‰ë¥  ë°”, ë™ê¸°ë¶€ì—¬ ë©”ì‹œì§€)
  - âœ… RecommendedScenariosSection (ì¹´ë“œ í¬ê¸° í™•ëŒ€)
  - âœ… RecentScenariosSection (ìµœê·¼ í•™ìŠµ ì‹œë‚˜ë¦¬ì˜¤)
  - â³ LearningProgressCard (ëŒ€ê¸° ì¤‘)
  - â³ StreakCard (ëŒ€ê¸° ì¤‘)

### ë‹¤ìŒ ì˜ˆì • Phase
- ğŸ“… Phase 6: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” (HomeScreen ì™„ì„± í›„)
- ğŸ“… Phase 3: ë¦¬ë”ë³´ë“œ & Achievement
- ğŸ“… Phase 4: í•™ìŠµ í†µê³„ ê³ ë„í™”

---

## ğŸ“Š ì°¸ê³  ë””ìì¸ ë¶„ì„

### ë²¤ì¹˜ë§ˆí¬ ì•± íŠ¹ì§•
1. **ëŒ€ì‹œë³´ë“œ ì¤‘ì‹¬ ì„¤ê³„**: í•™ìŠµ ì§„í–‰ë¥ ì„ í•œëˆˆì— íŒŒì•… (78%, ì™„ë£Œ/ì˜ˆì • ìˆ˜ì¹˜í™”)
2. **ê²Œì„í™” ìš”ì†Œ**: í€˜ìŠ¤íŠ¸, í¬ì¸íŠ¸, ë ˆë²¨, ë¦¬ë”ë³´ë“œ
3. **ë°ì´í„° ì‹œê°í™”**: ê³¡ì„  ê·¸ë˜í”„, ë°” ì°¨íŠ¸, íˆíŠ¸ë§µ
4. **ë§ˆì´í¬ë¡œ ì• ë‹ˆë©”ì´ì…˜**: ë¶€ë“œëŸ¬ìš´ ì „í™˜, ì¸í„°ë™í‹°ë¸Œ í”¼ë“œë°±
5. **ì¹´ë“œ UI**: ë‘¥ê·¼ ëª¨ì„œë¦¬, ê·¸ë¼ë°ì´ì…˜, ìƒ‰ìƒ ì½”ë”©
6. **ì†Œì…œ ìš”ì†Œ**: ë¦¬ë”ë³´ë“œ, Achievement, ê²½ìŸ ì‹œìŠ¤í…œ

---

## ğŸ¯ ê°œí¸ ëª©í‘œ

### Before (í˜„ì¬ ìƒíƒœ)
- ScenarioListScreen = ë‹¨ìˆœ ì‹œë‚˜ë¦¬ì˜¤ ëª©ë¡
- í•™ìŠµ ë™ê¸° ë¶€ì—¬ ìš”ì†Œ ë¶€ì¡±
- ì§„í–‰ ìƒí™© íŒŒì•… ì–´ë ¤ì›€ (Stats í™”ë©´ì—ë§Œ ì¡´ì¬)
- ì •ì ì¸ UI, ì• ë‹ˆë©”ì´ì…˜ ìµœì†Œ
- ì†Œì…œ/ê²½ìŸ ìš”ì†Œ ì—†ìŒ

### After (ëª©í‘œ ìƒíƒœ)
- **í™ˆ ëŒ€ì‹œë³´ë“œ**: í•™ìŠµ ì§„í–‰ë¥ , ìŠ¤íŠ¸ë¦­, ì¼ì¼ ëª©í‘œë¥¼ ìƒë‹¨ì— ë°°ì¹˜
- **í€˜ìŠ¤íŠ¸ ì‹œìŠ¤í…œ**: ì¼ì¼ ë¯¸ì…˜ìœ¼ë¡œ í•™ìŠµ ë™ê¸° ë¶€ì—¬ (30í¬ì¸íŠ¸ ë³´ìƒ)
- **ë¦¬ë”ë³´ë“œ**: ì£¼ê°„ ìˆœìœ„ ê²½ìŸìœ¼ë¡œ ì§€ì†ì„± í–¥ìƒ
- **ì• ë‹ˆë©”ì´ì…˜**: ë¶€ë“œëŸ¬ìš´ ì „í™˜, í¬ì¸íŠ¸ íšë“ íš¨ê³¼
- **í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜**: ì£¼ìš” í™”ë©´ ë¹ ë¥¸ ì ‘ê·¼ (í™ˆ/í•™ìŠµ/ë³µìŠµ/í†µê³„/í”„ë¡œí•„)

---

## ğŸ“‚ Phaseë³„ êµ¬í˜„ ê³„íš

### Phase 1: í™ˆ ëŒ€ì‹œë³´ë“œ í˜ì‹  ğŸ  **ìµœìš°ì„ **
**ì˜ˆìƒ ì‹œê°„**: 6ì‹œê°„
**ìš°ì„ ìˆœìœ„**: ğŸ”¥ Critical

#### ëª©í‘œ
ScenarioListScreenì„ ë‹¨ìˆœ ëª©ë¡ì—ì„œ í•™ìŠµ ëŒ€ì‹œë³´ë“œë¡œ ì „í™˜

#### êµ¬í˜„ ë‚´ìš©

##### 1.1 í•™ìŠµ ì§„í–‰ë¥  ìš”ì•½ ì¹´ë“œ
**íŒŒì¼**: `presentation/dashboard/LearningProgressCard.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun LearningProgressCard(
    completedCount: Int,
    inProgressCount: Int,
    favoriteCount: Int,
    averageProgress: Float,  // 0.0 ~ 1.0
    modifier: Modifier = Modifier
) {
    Card(
        modifier = modifier
            .fillMaxWidth()
            .padding(16.dp),
        elevation = CardDefaults.cardElevation(4.dp)
    ) {
        Row(
            modifier = Modifier.padding(20.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            // ì¢Œì¸¡: ë©”íŠ¸ë¦­ ë°•ìŠ¤ë“¤
            Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {
                Row(horizontalArrangement = Arrangement.spacedBy(16.dp)) {
                    MetricBox(
                        icon = Icons.Default.CheckCircle,
                        count = completedCount,
                        label = "ì™„ë£Œ",
                        color = Color(0xFF4CAF50)  // Green
                    )

                    MetricBox(
                        icon = Icons.Default.PlayCircle,
                        count = inProgressCount,
                        label = "ì§„í–‰ ì¤‘",
                        color = Color(0xFF2196F3)  // Blue
                    )
                }

                MetricBox(
                    icon = Icons.Default.Star,
                    count = favoriteCount,
                    label = "ì¦ê²¨ì°¾ê¸°",
                    color = Color(0xFFFFD700)  // Gold
                )
            }

            // ìš°ì¸¡: ì§„í–‰ë¥  ì›í˜• ì°¨íŠ¸
            Box(contentAlignment = Alignment.Center) {
                CircularProgressIndicator(
                    progress = averageProgress,
                    modifier = Modifier.size(100.dp),
                    strokeWidth = 12.dp,
                    color = MaterialTheme.colorScheme.primary,
                    trackColor = MaterialTheme.colorScheme.surfaceVariant
                )

                Text(
                    text = "${(averageProgress * 100).toInt()}%",
                    style = MaterialTheme.typography.headlineMedium,
                    fontWeight = FontWeight.Bold
                )
            }
        }
    }
}

@Composable
private fun MetricBox(
    icon: ImageVector,
    count: Int,
    label: String,
    color: Color
) {
    Row(
        horizontalArrangement = Arrangement.spacedBy(8.dp),
        verticalAlignment = Alignment.CenterVertically
    ) {
        Icon(
            imageVector = icon,
            contentDescription = label,
            tint = color,
            modifier = Modifier.size(24.dp)
        )

        Column {
            Text(
                text = count.toString(),
                style = MaterialTheme.typography.titleLarge,
                fontWeight = FontWeight.Bold
            )
            Text(
                text = label,
                style = MaterialTheme.typography.bodySmall,
                color = MaterialTheme.colorScheme.onSurfaceVariant
            )
        }
    }
}
```

##### 1.2 í•™ìŠµ ìŠ¤íŠ¸ë¦­ ì¹´ë“œ
**íŒŒì¼**: `presentation/dashboard/StreakCard.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun StreakCard(
    currentStreak: Int,
    bestStreak: Int,
    lastStudyDate: String,
    modifier: Modifier = Modifier
) {
    Card(
        modifier = modifier
            .fillMaxWidth()
            .padding(horizontal = 16.dp, vertical = 8.dp),
        colors = CardDefaults.cardColors(
            containerColor = MaterialTheme.colorScheme.primaryContainer
        )
    ) {
        Column(
            modifier = Modifier.padding(20.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Column {
                    Text(
                        text = "ì—°ì† í•™ìŠµ",
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )
                    Text(
                        text = "ë§ˆì§€ë§‰ í•™ìŠµ: $lastStudyDate",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }

                Icon(
                    imageVector = Icons.Default.LocalFireDepartment,
                    contentDescription = "ìŠ¤íŠ¸ë¦­",
                    modifier = Modifier.size(40.dp),
                    tint = Color(0xFFFF6B35)  // Orange flame color
                )
            }

            // í˜„ì¬ ìŠ¤íŠ¸ë¦­ (ë¶ˆ ì´ëª¨ì§€)
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.Center,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Text(
                    text = "ğŸ”¥".repeat(currentStreak.coerceAtMost(10)),
                    fontSize = 24.sp
                )
            }

            // í†µê³„
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceEvenly
            ) {
                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    Text(
                        text = "$currentStreakì¼",
                        style = MaterialTheme.typography.headlineSmall,
                        fontWeight = FontWeight.Bold,
                        color = MaterialTheme.colorScheme.primary
                    )
                    Text(
                        text = "í˜„ì¬",
                        style = MaterialTheme.typography.bodySmall
                    )
                }

                Divider(
                    modifier = Modifier
                        .height(40.dp)
                        .width(1.dp)
                )

                Column(horizontalAlignment = Alignment.CenterHorizontally) {
                    Text(
                        text = "$bestStreakì¼",
                        style = MaterialTheme.typography.headlineSmall,
                        fontWeight = FontWeight.Bold
                    )
                    Text(
                        text = "ìµœê³  ê¸°ë¡",
                        style = MaterialTheme.typography.bodySmall
                    )
                }
            }
        }
    }
}
```

##### 1.3 ì¼ì¼ ëª©í‘œ ì¹´ë“œ
**íŒŒì¼**: `presentation/dashboard/DailyGoalCard.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun DailyGoalCard(
    currentCount: Int,
    targetCount: Int,
    remainingHours: Int,
    remainingMinutes: Int,
    modifier: Modifier = Modifier
) {
    val progress = (currentCount.toFloat() / targetCount).coerceAtMost(1f)

    Card(
        modifier = modifier
            .fillMaxWidth()
            .padding(horizontal = 16.dp, vertical = 8.dp)
    ) {
        Column(
            modifier = Modifier.padding(20.dp),
            verticalArrangement = Arrangement.spacedBy(12.dp)
        ) {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Text(
                    text = "ì˜¤ëŠ˜ì˜ ëª©í‘œ",
                    style = MaterialTheme.typography.titleMedium,
                    fontWeight = FontWeight.Bold
                )

                Text(
                    text = "$currentCount / $targetCount ë©”ì‹œì§€",
                    style = MaterialTheme.typography.bodyLarge,
                    color = MaterialTheme.colorScheme.primary,
                    fontWeight = FontWeight.Bold
                )
            }

            // ì§„í–‰ë¥  ë°”
            LinearProgressIndicator(
                progress = { progress },
                modifier = Modifier
                    .fillMaxWidth()
                    .height(12.dp)
                    .clip(RoundedCornerShape(6.dp)),
                color = if (progress >= 1f) Color(0xFF4CAF50)
                        else MaterialTheme.colorScheme.primary,
            )

            // ë‚¨ì€ ì‹œê°„
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.SpaceBetween,
                verticalAlignment = Alignment.CenterVertically
            ) {
                Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {
                    Icon(
                        imageVector = Icons.Default.Timer,
                        contentDescription = "ì‹œê°„",
                        modifier = Modifier.size(16.dp),
                        tint = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                    Text(
                        text = "ë‚¨ì€ ì‹œê°„: ${remainingHours}ì‹œê°„ ${remainingMinutes}ë¶„",
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }

                // ì™„ë£Œ ì‹œ í‘œì‹œ
                if (progress >= 1f) {
                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {
                        Icon(
                            imageVector = Icons.Default.CheckCircle,
                            contentDescription = "ì™„ë£Œ",
                            tint = Color(0xFF4CAF50),
                            modifier = Modifier.size(20.dp)
                        )
                        Text(
                            text = "ëª©í‘œ ë‹¬ì„±!",
                            color = Color(0xFF4CAF50),
                            fontWeight = FontWeight.Bold
                        )
                    }
                }
            }
        }
    }
}
```

##### 1.4 ScenarioListScreen í†µí•©
**íŒŒì¼**: `presentation/scenario/ScenarioListScreen.kt` (ìˆ˜ì •)

```kotlin
// ê¸°ì¡´ LazyColumnì— ëŒ€ì‹œë³´ë“œ ì¹´ë“œë“¤ ì¶”ê°€
LazyColumn(
    modifier = Modifier.fillMaxSize(),
    state = listState
) {
    // 1. í•™ìŠµ ì§„í–‰ë¥  ì¹´ë“œ
    item {
        LearningProgressCard(
            completedCount = uiState.completedCount,
            inProgressCount = uiState.inProgressCount,
            favoriteCount = uiState.favoriteCount,
            averageProgress = uiState.averageProgress
        )
    }

    // 2. ìŠ¤íŠ¸ë¦­ ì¹´ë“œ
    item {
        StreakCard(
            currentStreak = uiState.currentStreak,
            bestStreak = uiState.bestStreak,
            lastStudyDate = uiState.lastStudyDate
        )
    }

    // 3. ì¼ì¼ ëª©í‘œ ì¹´ë“œ
    item {
        DailyGoalCard(
            currentCount = uiState.todayMessageCount,
            targetCount = uiState.dailyGoal,
            remainingHours = uiState.remainingHours,
            remainingMinutes = uiState.remainingMinutes
        )
    }

    // 4. í€˜ìŠ¤íŠ¸ ì„¹ì…˜ (Phase 2ì—ì„œ ì¶”ê°€)
    // ...

    // 5. ì„¹ì…˜ í—¤ë”
    item {
        Text(
            text = "ì‹œë‚˜ë¦¬ì˜¤",
            style = MaterialTheme.typography.titleLarge,
            fontWeight = FontWeight.Bold,
            modifier = Modifier.padding(start = 16.dp, top = 16.dp, bottom = 8.dp)
        )
    }

    // 6. ê¸°ì¡´ ì‹œë‚˜ë¦¬ì˜¤ ëª©ë¡
    items(uiState.scenarios, key = { it.id }) { scenario ->
        ScenarioCard(...)
    }
}
```

##### 1.5 ViewModel ì—…ë°ì´íŠ¸
**íŒŒì¼**: `presentation/scenario/ScenarioViewModel.kt` (ìˆ˜ì •)

```kotlin
data class ScenarioUiState(
    // ê¸°ì¡´ í•„ë“œë“¤...
    val scenarios: List<Scenario> = emptyList(),
    val searchQuery: String = "",
    val selectedDifficulties: Set<Int> = emptySet(),

    // ìƒˆë¡œ ì¶”ê°€: ëŒ€ì‹œë³´ë“œ ë°ì´í„°
    val completedCount: Int = 0,
    val inProgressCount: Int = 0,
    val favoriteCount: Int = 0,
    val averageProgress: Float = 0f,
    val currentStreak: Int = 0,
    val bestStreak: Int = 0,
    val lastStudyDate: String = "",
    val todayMessageCount: Int = 0,
    val dailyGoal: Int = 10,
    val remainingHours: Int = 0,
    val remainingMinutes: Int = 0
)

class ScenarioViewModel @Inject constructor(
    private val repository: ConversationRepository
) : ViewModel() {

    init {
        loadDashboardData()
    }

    private fun loadDashboardData() {
        viewModelScope.launch {
            // ì™„ë£Œ/ì§„í–‰ ì¤‘/ì¦ê²¨ì°¾ê¸° ê³„ì‚°
            val allScenarios = repository.getAllScenarios().first()
            val completedScenarios = repository.getCompletedScenarios(currentUserId).first()
            val inProgressScenarios = repository.getInProgressScenarios(currentUserId).first()
            val favoriteScenarios = allScenarios.filter { it.isFavorite }

            // í‰ê·  ì§„í–‰ë¥  ê³„ì‚°
            val totalProgress = completedScenarios.size.toFloat() / allScenarios.size

            // ìŠ¤íŠ¸ë¦­ ê³„ì‚°
            val streak = calculateStreak()

            // ì˜¤ëŠ˜ ë©”ì‹œì§€ ìˆ˜
            val todayMessages = repository.getTodayMessageCount(currentUserId).first()

            // ë‚¨ì€ ì‹œê°„ (ìì •ê¹Œì§€)
            val now = LocalDateTime.now()
            val midnight = now.toLocalDate().plusDays(1).atStartOfDay()
            val duration = Duration.between(now, midnight)

            _uiState.update {
                it.copy(
                    completedCount = completedScenarios.size,
                    inProgressCount = inProgressScenarios.size,
                    favoriteCount = favoriteScenarios.size,
                    averageProgress = totalProgress,
                    currentStreak = streak.current,
                    bestStreak = streak.best,
                    lastStudyDate = streak.lastStudyDate,
                    todayMessageCount = todayMessages,
                    remainingHours = duration.toHours().toInt(),
                    remainingMinutes = (duration.toMinutes() % 60).toInt()
                )
            }
        }
    }

    private suspend fun calculateStreak(): StreakData {
        // TODO: Repositoryì— í•™ìŠµ ê¸°ë¡ ì¡°íšŒ ë©”ì„œë“œ ì¶”ê°€
        // ì—°ì† í•™ìŠµ ì¼ìˆ˜ ê³„ì‚° ë¡œì§
        return StreakData(current = 7, best = 15, lastStudyDate = "ì˜¤ëŠ˜ 15:23")
    }
}

data class StreakData(
    val current: Int,
    val best: Int,
    val lastStudyDate: String
)
```

##### 1.6 Repository ì—…ë°ì´íŠ¸
**íŒŒì¼**: `data/repository/ConversationRepository.kt` (ìˆ˜ì •)

```kotlin
interface ConversationRepository {
    // ê¸°ì¡´ ë©”ì„œë“œë“¤...

    // ìƒˆë¡œ ì¶”ê°€: ëŒ€ì‹œë³´ë“œ í†µê³„
    fun getCompletedScenarios(userId: Long): Flow<List<Scenario>>
    fun getInProgressScenarios(userId: Long): Flow<List<Scenario>>
    fun getTodayMessageCount(userId: Long): Flow<Int>
    fun getStudyStreak(userId: Long): Flow<StreakData>
}

class ConversationRepositoryImpl @Inject constructor(
    private val conversationDao: ConversationDao,
    private val messageDao: MessageDao,
    private val scenarioDao: ScenarioDao
) : ConversationRepository {

    override fun getCompletedScenarios(userId: Long): Flow<List<Scenario>> {
        // Conversation í…Œì´ë¸”ì—ì„œ isCompleted = trueì¸ ì‹œë‚˜ë¦¬ì˜¤ ì¡°íšŒ
        return conversationDao.getCompletedConversations(userId)
            .map { conversations ->
                conversations.mapNotNull { conversation ->
                    scenarioDao.getScenarioById(conversation.scenarioId)
                }.distinctBy { it.id }
            }
    }

    override fun getInProgressScenarios(userId: Long): Flow<List<Scenario>> {
        return conversationDao.getInProgressConversations(userId)
            .map { conversations ->
                conversations.mapNotNull { conversation ->
                    scenarioDao.getScenarioById(conversation.scenarioId)
                }.distinctBy { it.id }
            }
    }

    override fun getTodayMessageCount(userId: Long): Flow<Int> {
        val startOfDay = LocalDate.now().atStartOfDay()
            .atZone(ZoneId.systemDefault())
            .toInstant()
            .toEpochMilli()

        return messageDao.getMessageCountSince(userId, startOfDay)
    }

    override fun getStudyStreak(userId: Long): Flow<StreakData> {
        // TODO: í•™ìŠµ ê¸°ë¡ í…Œì´ë¸” í•„ìš” (study_log)
        // ë§¤ì¼ í•™ìŠµ ì—¬ë¶€ë¥¼ ê¸°ë¡í•˜ê³  ì—°ì† ì¼ìˆ˜ ê³„ì‚°
        return flow {
            emit(StreakData(current = 0, best = 0, lastStudyDate = ""))
        }
    }
}
```

##### 1.7 DAO ì—…ë°ì´íŠ¸
**íŒŒì¼**: `data/local/dao/ConversationDao.kt` (ìˆ˜ì •)

```kotlin
@Dao
interface ConversationDao {
    // ê¸°ì¡´ ë©”ì„œë“œë“¤...

    @Query("""
        SELECT * FROM conversations
        WHERE userId = :userId AND isCompleted = 1
        ORDER BY updatedAt DESC
    """)
    fun getCompletedConversations(userId: Long): Flow<List<ConversationEntity>>

    @Query("""
        SELECT * FROM conversations
        WHERE userId = :userId AND isCompleted = 0
        ORDER BY updatedAt DESC
    """)
    fun getInProgressConversations(userId: Long): Flow<List<ConversationEntity>>
}

@Dao
interface MessageDao {
    // ê¸°ì¡´ ë©”ì„œë“œë“¤...

    @Query("""
        SELECT COUNT(*) FROM messages
        WHERE conversationId IN (
            SELECT id FROM conversations WHERE userId = :userId
        ) AND timestamp >= :startTimestamp
    """)
    fun getMessageCountSince(userId: Long, startTimestamp: Long): Flow<Int>
}
```

#### ì™„ë£Œ ì¡°ê±´
- [ ] LearningProgressCard ì»´í¬ë„ŒíŠ¸ ì‘ë™
- [ ] StreakCard ì»´í¬ë„ŒíŠ¸ ì‘ë™
- [ ] DailyGoalCard ì»´í¬ë„ŒíŠ¸ ì‘ë™
- [ ] ScenarioListScreenì— ëŒ€ì‹œë³´ë“œ ì¹´ë“œ í†µí•©
- [ ] ViewModelì—ì„œ ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
- [ ] Repository/DAOì— í†µê³„ ì¿¼ë¦¬ ì¶”ê°€
- [ ] ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸ í™•ì¸

---

### Phase 2: í€˜ìŠ¤íŠ¸/ë¯¸ì…˜ ì‹œìŠ¤í…œ ğŸ® **ìµœìš°ì„ **
**ì˜ˆìƒ ì‹œê°„**: 8ì‹œê°„
**ìš°ì„ ìˆœìœ„**: ğŸ”¥ Critical

#### ëª©í‘œ
ì¼ì¼ í€˜ìŠ¤íŠ¸ë¡œ í•™ìŠµ ë™ê¸° ë¶€ì—¬ (ê²Œì„í™”)

#### êµ¬í˜„ ë‚´ìš©

##### 2.1 Database Schema
**íŒŒì¼**: `data/local/entity/DailyQuestEntity.kt` (ì‹ ê·œ)

```kotlin
@Entity(
    tableName = "daily_quests",
    indices = [
        Index(value = ["userId"]),
        Index(value = ["expiresAt"]),
        Index(value = ["isCompleted"])
    ]
)
data class DailyQuestEntity(
    @PrimaryKey(autoGenerate = true) val id: Long = 0,
    val userId: Long,
    val title: String,  // "í¸ì˜ì ì—ì„œ ëŒ€í™” ì™„ë£Œí•˜ê¸°"
    val description: String,
    val questType: String,  // MESSAGE_COUNT, SCENARIO_COMPLETE, etc.
    val targetValue: Int,  // 10 ë©”ì‹œì§€, 1 ì‹œë‚˜ë¦¬ì˜¤
    val currentValue: Int = 0,
    val rewardPoints: Int,  // 30 í¬ì¸íŠ¸
    val expiresAt: Long,  // ìì • (Epoch milliseconds)
    val isCompleted: Boolean = false,
    val completedAt: Long? = null,
    val createdAt: Long = System.currentTimeMillis()
)

enum class QuestType {
    MESSAGE_COUNT,        // 10ê°œ ë©”ì‹œì§€ ë³´ë‚´ê¸°
    SCENARIO_COMPLETE,    // ì‹œë‚˜ë¦¬ì˜¤ 1ê°œ ì™„ë£Œ
    VOICE_ONLY_SESSION,   // ìŒì„± ì „ìš© ëª¨ë“œë¡œ ëŒ€í™”
    VOCABULARY_REVIEW,    // í”Œë˜ì‹œì¹´ë“œ 20ê°œ ë³µìŠµ
    PRONUNCIATION_PRACTICE, // ë°œìŒ ì—°ìŠµ 5íšŒ
    GRAMMAR_ANALYSIS,     // ë¬¸ë²• ë¶„ì„ 3íšŒ ì‚¬ìš©
    CONVERSATION_LENGTH,  // 15ë¶„ ì´ìƒ ëŒ€í™”
    NEW_SCENARIO          // ìƒˆë¡œìš´ ì‹œë‚˜ë¦¬ì˜¤ ì‹œì‘
}
```

**íŒŒì¼**: `data/local/entity/UserPointsEntity.kt` (ì‹ ê·œ)

```kotlin
@Entity(tableName = "user_points")
data class UserPointsEntity(
    @PrimaryKey val userId: Long,
    val totalPoints: Int = 0,
    val todayPoints: Int = 0,
    val weeklyPoints: Int = 0,
    val level: Int = 1,  // ë ˆë²¨ (100í¬ì¸íŠ¸ = 1ë ˆë²¨)
    val weeklyRank: Int? = null,
    val lastResetDate: Long = System.currentTimeMillis()
)
```

##### 2.2 DAO
**íŒŒì¼**: `data/local/dao/DailyQuestDao.kt` (ì‹ ê·œ)

```kotlin
@Dao
interface DailyQuestDao {
    @Query("SELECT * FROM daily_quests WHERE userId = :userId AND expiresAt > :now ORDER BY isCompleted ASC, rewardPoints DESC")
    fun getActiveQuests(userId: Long, now: Long = System.currentTimeMillis()): Flow<List<DailyQuestEntity>>

    @Query("SELECT * FROM daily_quests WHERE userId = :userId AND isCompleted = 1 ORDER BY completedAt DESC LIMIT 10")
    fun getCompletedQuests(userId: Long): Flow<List<DailyQuestEntity>>

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertQuest(quest: DailyQuestEntity): Long

    @Update
    suspend fun updateQuest(quest: DailyQuestEntity)

    @Query("UPDATE daily_quests SET currentValue = :value WHERE id = :questId")
    suspend fun updateQuestProgress(questId: Long, value: Int)

    @Query("UPDATE daily_quests SET isCompleted = 1, completedAt = :completedAt WHERE id = :questId")
    suspend fun completeQuest(questId: Long, completedAt: Long = System.currentTimeMillis())

    @Query("DELETE FROM daily_quests WHERE expiresAt < :now")
    suspend fun deleteExpiredQuests(now: Long = System.currentTimeMillis())
}

@Dao
interface UserPointsDao {
    @Query("SELECT * FROM user_points WHERE userId = :userId")
    fun getUserPoints(userId: Long): Flow<UserPointsEntity?>

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    suspend fun insertUserPoints(userPoints: UserPointsEntity)

    @Query("UPDATE user_points SET totalPoints = totalPoints + :points, todayPoints = todayPoints + :points, weeklyPoints = weeklyPoints + :points WHERE userId = :userId")
    suspend fun addPoints(userId: Long, points: Int)

    @Query("UPDATE user_points SET level = :level WHERE userId = :userId")
    suspend fun updateLevel(userId: Long, level: Int)

    @Query("UPDATE user_points SET todayPoints = 0, lastResetDate = :resetDate WHERE userId = :userId")
    suspend fun resetDailyPoints(userId: Long, resetDate: Long)

    @Query("UPDATE user_points SET weeklyPoints = 0 WHERE userId = :userId")
    suspend fun resetWeeklyPoints(userId: Long)
}
```

##### 2.3 Domain Model
**íŒŒì¼**: `domain/model/Quest.kt` (ì‹ ê·œ)

```kotlin
data class Quest(
    val id: Long,
    val title: String,
    val description: String,
    val type: QuestType,
    val targetValue: Int,
    val currentValue: Int,
    val rewardPoints: Int,
    val expiresAt: Long,
    val isCompleted: Boolean,
    val progress: Float = currentValue.toFloat() / targetValue
)

data class UserPoints(
    val userId: Long,
    val totalPoints: Int,
    val todayPoints: Int,
    val weeklyPoints: Int,
    val level: Int,
    val pointsToNextLevel: Int,
    val weeklyRank: Int?
)
```

##### 2.4 Repository
**íŒŒì¼**: `data/repository/QuestRepository.kt` (ì‹ ê·œ)

```kotlin
interface QuestRepository {
    fun getActiveQuests(userId: Long): Flow<List<Quest>>
    fun getUserPoints(userId: Long): Flow<UserPoints?>
    suspend fun generateDailyQuests(userId: Long)
    suspend fun updateQuestProgress(questId: Long, value: Int)
    suspend fun completeQuest(questId: Long): Int  // Returns reward points
    suspend fun addPoints(userId: Long, points: Int)
}

class QuestRepositoryImpl @Inject constructor(
    private val questDao: DailyQuestDao,
    private val pointsDao: UserPointsDao
) : QuestRepository {

    override fun getActiveQuests(userId: Long): Flow<List<Quest>> {
        return questDao.getActiveQuests(userId)
            .map { entities ->
                entities.map { it.toDomainModel() }
            }
    }

    override fun getUserPoints(userId: Long): Flow<UserPoints?> {
        return pointsDao.getUserPoints(userId)
            .map { entity ->
                entity?.toDomainModel()
            }
    }

    override suspend fun generateDailyQuests(userId: Long) {
        // ìì • (ë‹¤ìŒë‚  00:00:00)
        val midnight = LocalDate.now().plusDays(1).atStartOfDay()
            .atZone(ZoneId.systemDefault())
            .toInstant()
            .toEpochMilli()

        // í€˜ìŠ¤íŠ¸ í…œí”Œë¦¿
        val questTemplates = listOf(
            DailyQuestEntity(
                userId = userId,
                title = "ëŒ€í™” ì—°ìŠµí•˜ê¸°",
                description = "AIì™€ 10ê°œ ë©”ì‹œì§€ ì£¼ê³ ë°›ê¸°",
                questType = QuestType.MESSAGE_COUNT.name,
                targetValue = 10,
                rewardPoints = 30,
                expiresAt = midnight
            ),
            DailyQuestEntity(
                userId = userId,
                title = "ì‹œë‚˜ë¦¬ì˜¤ ì™„ì£¼",
                description = "ì‹œë‚˜ë¦¬ì˜¤ 1ê°œ ì™„ë£Œí•˜ê¸°",
                questType = QuestType.SCENARIO_COMPLETE.name,
                targetValue = 1,
                rewardPoints = 50,
                expiresAt = midnight
            ),
            DailyQuestEntity(
                userId = userId,
                title = "ìŒì„± ì „ìš© ëŒ€í™”",
                description = "ìŒì„±ë§Œìœ¼ë¡œ ëŒ€í™” ì™„ë£Œ",
                questType = QuestType.VOICE_ONLY_SESSION.name,
                targetValue = 1,
                rewardPoints = 40,
                expiresAt = midnight
            )
        )

        // ëœë¤í•˜ê²Œ 3ê°œ ì„ íƒ
        questTemplates.shuffled().take(3).forEach { quest ->
            questDao.insertQuest(quest)
        }
    }

    override suspend fun updateQuestProgress(questId: Long, value: Int) {
        questDao.updateQuestProgress(questId, value)

        // ëª©í‘œ ë‹¬ì„± ì‹œ ìë™ ì™„ë£Œ
        val quest = questDao.getActiveQuests(0).first().find { it.id == questId }
        if (quest != null && value >= quest.targetValue) {
            completeQuest(questId)
        }
    }

    override suspend fun completeQuest(questId: Long): Int {
        val quest = questDao.getActiveQuests(0).first().find { it.id == questId }
        if (quest != null && !quest.isCompleted) {
            questDao.completeQuest(questId)
            addPoints(quest.userId, quest.rewardPoints)
            return quest.rewardPoints
        }
        return 0
    }

    override suspend fun addPoints(userId: Long, points: Int) {
        pointsDao.addPoints(userId, points)

        // ë ˆë²¨ì—… ì²´í¬
        val userPoints = pointsDao.getUserPoints(userId).first()
        if (userPoints != null) {
            val newLevel = (userPoints.totalPoints / 100) + 1
            if (newLevel > userPoints.level) {
                pointsDao.updateLevel(userId, newLevel)
            }
        }
    }
}

// Extension functions
private fun DailyQuestEntity.toDomainModel() = Quest(
    id = id,
    title = title,
    description = description,
    type = QuestType.valueOf(questType),
    targetValue = targetValue,
    currentValue = currentValue,
    rewardPoints = rewardPoints,
    expiresAt = expiresAt,
    isCompleted = isCompleted
)

private fun UserPointsEntity.toDomainModel() = UserPoints(
    userId = userId,
    totalPoints = totalPoints,
    todayPoints = todayPoints,
    weeklyPoints = weeklyPoints,
    level = level,
    pointsToNextLevel = (level * 100) - (totalPoints % 100),
    weeklyRank = weeklyRank
)
```

##### 2.5 UI Components
**íŒŒì¼**: `presentation/quest/QuestCard.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun QuestCard(
    quest: Quest,
    onClick: () -> Unit,
    modifier: Modifier = Modifier
) {
    Card(
        modifier = modifier
            .fillMaxWidth()
            .clickable { onClick() },
        elevation = CardDefaults.cardElevation(2.dp)
    ) {
        Row(
            modifier = Modifier
                .padding(16.dp)
                .fillMaxWidth(),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            // ì¢Œì¸¡: ì•„ì´ì½˜ + ë‚´ìš©
            Row(
                modifier = Modifier.weight(1f),
                horizontalArrangement = Arrangement.spacedBy(12.dp)
            ) {
                // í€˜ìŠ¤íŠ¸ íƒ€ì… ì•„ì´ì½˜
                Icon(
                    imageVector = when(quest.type) {
                        QuestType.MESSAGE_COUNT -> Icons.Default.Message
                        QuestType.SCENARIO_COMPLETE -> Icons.Default.CheckCircle
                        QuestType.VOICE_ONLY_SESSION -> Icons.Default.Mic
                        QuestType.VOCABULARY_REVIEW -> Icons.Default.Book
                        QuestType.PRONUNCIATION_PRACTICE -> Icons.Default.RecordVoiceOver
                        QuestType.GRAMMAR_ANALYSIS -> Icons.Default.Analytics
                        QuestType.CONVERSATION_LENGTH -> Icons.Default.Timer
                        QuestType.NEW_SCENARIO -> Icons.Default.AddCircle
                    },
                    contentDescription = quest.type.name,
                    modifier = Modifier.size(40.dp),
                    tint = if (quest.isCompleted) Color(0xFFFFD700)
                           else MaterialTheme.colorScheme.primary
                )

                Column(verticalArrangement = Arrangement.spacedBy(4.dp)) {
                    Text(
                        text = quest.title,
                        style = MaterialTheme.typography.titleMedium,
                        fontWeight = FontWeight.Bold
                    )

                    Text(
                        text = quest.description,
                        style = MaterialTheme.typography.bodySmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )

                    // ì§„í–‰ë¥  ë°”
                    LinearProgressIndicator(
                        progress = { quest.progress },
                        modifier = Modifier
                            .fillMaxWidth()
                            .height(6.dp)
                            .clip(RoundedCornerShape(3.dp)),
                        color = if (quest.isCompleted) Color(0xFF4CAF50)
                                else MaterialTheme.colorScheme.primary,
                    )

                    Text(
                        text = "${quest.currentValue} / ${quest.targetValue}",
                        style = MaterialTheme.typography.labelSmall,
                        color = MaterialTheme.colorScheme.onSurfaceVariant
                    )
                }
            }

            // ìš°ì¸¡: ë³´ìƒ
            Box(
                modifier = Modifier
                    .background(
                        if (quest.isCompleted) Color(0xFF4CAF50).copy(alpha = 0.2f)
                        else Color(0xFFFFD700).copy(alpha = 0.2f),
                        shape = RoundedCornerShape(8.dp)
                    )
                    .padding(horizontal = 12.dp, vertical = 8.dp)
            ) {
                Row(
                    horizontalArrangement = Arrangement.spacedBy(4.dp),
                    verticalAlignment = Alignment.CenterVertically
                ) {
                    if (quest.isCompleted) {
                        Icon(
                            imageVector = Icons.Default.CheckCircle,
                            contentDescription = "ì™„ë£Œ",
                            tint = Color(0xFF4CAF50),
                            modifier = Modifier.size(20.dp)
                        )
                    } else {
                        Icon(
                            imageVector = Icons.Default.Stars,
                            contentDescription = "í¬ì¸íŠ¸",
                            tint = Color(0xFFFFD700),
                            modifier = Modifier.size(20.dp)
                        )
                    }
                    Text(
                        text = if (quest.isCompleted) "ì™„ë£Œ!"
                               else "${quest.rewardPoints}P",
                        style = MaterialTheme.typography.labelLarge,
                        fontWeight = FontWeight.Bold,
                        color = if (quest.isCompleted) Color(0xFF4CAF50)
                                else Color(0xFFD4AF37)
                    )
                }
            }
        }
    }
}
```

**íŒŒì¼**: `presentation/quest/QuestSection.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun QuestSection(
    quests: List<Quest>,
    userPoints: UserPoints?,
    onQuestClick: (Quest) -> Unit,
    onViewAllClick: () -> Unit,
    modifier: Modifier = Modifier
) {
    Column(
        modifier = modifier
            .fillMaxWidth()
            .padding(vertical = 8.dp),
        verticalArrangement = Arrangement.spacedBy(8.dp)
    ) {
        // í—¤ë”
        Row(
            modifier = Modifier
                .fillMaxWidth()
                .padding(horizontal = 16.dp),
            horizontalArrangement = Arrangement.SpaceBetween,
            verticalAlignment = Alignment.CenterVertically
        ) {
            Column {
                Text(
                    text = "ì˜¤ëŠ˜ì˜ í€˜ìŠ¤íŠ¸",
                    style = MaterialTheme.typography.titleLarge,
                    fontWeight = FontWeight.Bold
                )

                if (userPoints != null) {
                    Row(horizontalArrangement = Arrangement.spacedBy(4.dp)) {
                        Text(
                            text = "Lv.${userPoints.level}",
                            style = MaterialTheme.typography.bodySmall,
                            color = MaterialTheme.colorScheme.primary,
                            fontWeight = FontWeight.Bold
                        )
                        Text(
                            text = "â€¢ ${userPoints.totalPoints}P",
                            style = MaterialTheme.typography.bodySmall,
                            color = MaterialTheme.colorScheme.onSurfaceVariant
                        )
                    }
                }
            }

            TextButton(onClick = { onViewAllClick() }) {
                Text("ì „ì²´ ë³´ê¸°")
                Icon(
                    imageVector = Icons.Default.ChevronRight,
                    contentDescription = null,
                    modifier = Modifier.size(20.dp)
                )
            }
        }

        // í€˜ìŠ¤íŠ¸ ì¹´ë“œë“¤ (ìµœëŒ€ 3ê°œ)
        quests.take(3).forEach { quest ->
            QuestCard(
                quest = quest,
                onClick = { onQuestClick(quest) },
                modifier = Modifier.padding(horizontal = 16.dp)
            )
        }
    }
}
```

##### 2.6 ViewModel
**íŒŒì¼**: `presentation/quest/QuestViewModel.kt` (ì‹ ê·œ)

```kotlin
@HiltViewModel
class QuestViewModel @Inject constructor(
    private val questRepository: QuestRepository,
    private val userPreferences: UserPreferences
) : ViewModel() {

    private val currentUserId = userPreferences.currentUserId

    val quests = questRepository.getActiveQuests(currentUserId)
        .stateIn(
            scope = viewModelScope,
            started = SharingStarted.WhileSubscribed(5000),
            initialValue = emptyList()
        )

    val userPoints = questRepository.getUserPoints(currentUserId)
        .stateIn(
            scope = viewModelScope,
            started = SharingStarted.WhileSubscribed(5000),
            initialValue = null
        )

    init {
        checkAndGenerateQuests()
    }

    private fun checkAndGenerateQuests() {
        viewModelScope.launch {
            val activeQuests = questRepository.getActiveQuests(currentUserId).first()
            if (activeQuests.isEmpty()) {
                questRepository.generateDailyQuests(currentUserId)
            }
        }
    }

    fun updateQuestProgress(questId: Long, value: Int) {
        viewModelScope.launch {
            questRepository.updateQuestProgress(questId, value)
        }
    }

    fun completeQuest(questId: Long) {
        viewModelScope.launch {
            val points = questRepository.completeQuest(questId)
            if (points > 0) {
                _events.send(QuestEvent.QuestCompleted(points))
            }
        }
    }

    private val _events = Channel<QuestEvent>()
    val events = _events.receiveAsFlow()
}

sealed class QuestEvent {
    data class QuestCompleted(val points: Int) : QuestEvent()
}
```

##### 2.7 ChatViewModel í†µí•© (ìë™ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸)
**íŒŒì¼**: `presentation/chat/ChatViewModel.kt` (ìˆ˜ì •)

```kotlin
@HiltViewModel
class ChatViewModel @Inject constructor(
    // ...
    private val questRepository: QuestRepository
) : ViewModel() {

    fun sendMessage(text: String) {
        viewModelScope.launch {
            // ê¸°ì¡´ ë©”ì‹œì§€ ì „ì†¡ ë¡œì§...

            // í€˜ìŠ¤íŠ¸ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateQuestProgress()
        }
    }

    private suspend fun updateQuestProgress() {
        val activeQuests = questRepository.getActiveQuests(currentUserId).first()

        activeQuests.forEach { quest ->
            when (quest.type) {
                QuestType.MESSAGE_COUNT -> {
                    val newValue = quest.currentValue + 1
                    questRepository.updateQuestProgress(quest.id, newValue)
                }
                QuestType.CONVERSATION_LENGTH -> {
                    // ëŒ€í™” ì‹œê°„ ê³„ì‚°
                    val conversationDuration = calculateDuration()
                    if (conversationDuration >= 15) {
                        questRepository.updateQuestProgress(quest.id, 1)
                    }
                }
                // ë‹¤ë¥¸ í€˜ìŠ¤íŠ¸ íƒ€ì… ì²˜ë¦¬...
                else -> {}
            }
        }
    }
}
```

##### 2.8 ScenarioListScreen í†µí•©
**íŒŒì¼**: `presentation/scenario/ScenarioListScreen.kt` (ìˆ˜ì •)

```kotlin
@Composable
fun ScenarioListScreen(
    // ...
    questViewModel: QuestViewModel = hiltViewModel()
) {
    val quests by questViewModel.quests.collectAsState()
    val userPoints by questViewModel.userPoints.collectAsState()

    LazyColumn {
        // ... ëŒ€ì‹œë³´ë“œ ì¹´ë“œë“¤ ...

        // í€˜ìŠ¤íŠ¸ ì„¹ì…˜ ì¶”ê°€
        item {
            QuestSection(
                quests = quests,
                userPoints = userPoints,
                onQuestClick = { quest ->
                    // í€˜ìŠ¤íŠ¸ ìƒì„¸ ë˜ëŠ” ê´€ë ¨ í™”ë©´ìœ¼ë¡œ ì´ë™
                },
                onViewAllClick = {
                    navController.navigate("quest_list")
                }
            )
        }

        // ... ì‹œë‚˜ë¦¬ì˜¤ ëª©ë¡ ...
    }
}
```

##### 2.9 Database Migration
**íŒŒì¼**: `data/local/NihongoDatabase.kt` (ìˆ˜ì •)

```kotlin
@Database(
    entities = [
        // ê¸°ì¡´ ì—”í‹°í‹°ë“¤...
        DailyQuestEntity::class,
        UserPointsEntity::class
    ],
    version = 13,  // 12 â†’ 13
    exportSchema = true
)
abstract class NihongoDatabase : RoomDatabase() {
    // ...
    abstract fun dailyQuestDao(): DailyQuestDao
    abstract fun userPointsDao(): UserPointsDao
}

val MIGRATION_12_13 = object : Migration(12, 13) {
    override fun migrate(database: SupportSQLiteDatabase) {
        // daily_quests í…Œì´ë¸” ìƒì„±
        database.execSQL("""
            CREATE TABLE daily_quests (
                id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
                userId INTEGER NOT NULL,
                title TEXT NOT NULL,
                description TEXT NOT NULL,
                questType TEXT NOT NULL,
                targetValue INTEGER NOT NULL,
                currentValue INTEGER NOT NULL DEFAULT 0,
                rewardPoints INTEGER NOT NULL,
                expiresAt INTEGER NOT NULL,
                isCompleted INTEGER NOT NULL DEFAULT 0,
                completedAt INTEGER,
                createdAt INTEGER NOT NULL
            )
        """)

        database.execSQL("CREATE INDEX index_daily_quests_userId ON daily_quests(userId)")
        database.execSQL("CREATE INDEX index_daily_quests_expiresAt ON daily_quests(expiresAt)")
        database.execSQL("CREATE INDEX index_daily_quests_isCompleted ON daily_quests(isCompleted)")

        // user_points í…Œì´ë¸” ìƒì„±
        database.execSQL("""
            CREATE TABLE user_points (
                userId INTEGER PRIMARY KEY NOT NULL,
                totalPoints INTEGER NOT NULL DEFAULT 0,
                todayPoints INTEGER NOT NULL DEFAULT 0,
                weeklyPoints INTEGER NOT NULL DEFAULT 0,
                level INTEGER NOT NULL DEFAULT 1,
                weeklyRank INTEGER,
                lastResetDate INTEGER NOT NULL
            )
        """)
    }
}
```

##### 2.10 í¬ì¸íŠ¸ íšë“ ì• ë‹ˆë©”ì´ì…˜
**íŒŒì¼**: `presentation/quest/PointsEarnedAnimation.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun PointsEarnedAnimation(
    points: Int,
    onComplete: () -> Unit,
    modifier: Modifier = Modifier
) {
    var isVisible by remember { mutableStateOf(false) }

    LaunchedEffect(Unit) {
        isVisible = true
        delay(2000)
        isVisible = false
        delay(300)
        onComplete()
    }

    AnimatedVisibility(
        visible = isVisible,
        enter = fadeIn() + scaleIn(
            initialScale = 0.3f,
            animationSpec = spring(
                dampingRatio = Spring.DampingRatioMediumBouncy,
                stiffness = Spring.StiffnessLow
            )
        ),
        exit = fadeOut() + scaleOut() + slideOutVertically(
            targetOffsetY = { -it },
            animationSpec = tween(300)
        ),
        modifier = modifier
    ) {
        Box(
            modifier = Modifier
                .fillMaxSize()
                .background(Color.Black.copy(alpha = 0.5f))
                .clickable(enabled = false) { },
            contentAlignment = Alignment.Center
        ) {
            Column(
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.spacedBy(16.dp)
            ) {
                Icon(
                    imageVector = Icons.Default.Stars,
                    contentDescription = null,
                    modifier = Modifier.size(80.dp),
                    tint = Color(0xFFFFD700)
                )

                Text(
                    text = "+$points í¬ì¸íŠ¸",
                    fontSize = 32.sp,
                    fontWeight = FontWeight.Bold,
                    color = Color.White
                )

                Text(
                    text = "í€˜ìŠ¤íŠ¸ ì™„ë£Œ!",
                    fontSize = 20.sp,
                    color = Color.White
                )
            }
        }
    }
}

// ChatScreenì—ì„œ ì‚¬ìš©
@Composable
fun ChatScreen(
    // ...
    questViewModel: QuestViewModel = hiltViewModel()
) {
    var showPointsAnimation by remember { mutableStateOf(false) }
    var earnedPoints by remember { mutableStateOf(0) }

    LaunchedEffect(Unit) {
        questViewModel.events.collect { event ->
            when (event) {
                is QuestEvent.QuestCompleted -> {
                    earnedPoints = event.points
                    showPointsAnimation = true
                }
            }
        }
    }

    Box(modifier = Modifier.fillMaxSize()) {
        // ê¸°ì¡´ ì±„íŒ… UI...

        // í¬ì¸íŠ¸ íšë“ ì• ë‹ˆë©”ì´ì…˜
        if (showPointsAnimation) {
            PointsEarnedAnimation(
                points = earnedPoints,
                onComplete = { showPointsAnimation = false }
            )
        }
    }
}
```

#### ì™„ë£Œ ì¡°ê±´
- [x] DailyQuestEntity, UserPointsEntity í…Œì´ë¸” ìƒì„± âœ… (2025-11-12)
- [x] QuestRepository, QuestViewModel êµ¬í˜„ âœ… (2025-11-12)
- [x] QuestCard, QuestSection UI ì‘ë™ âœ… (2025-11-12)
- [x] HomeScreenì— í€˜ìŠ¤íŠ¸ ì„¹ì…˜ í†µí•© âœ… (2025-11-12)
- [x] ChatViewModelì—ì„œ ìë™ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ âœ… (2025-11-12)
- [x] í€˜ìŠ¤íŠ¸ ì™„ë£Œ ì‹œ í¬ì¸íŠ¸ ìë™ ì§€ê¸‰ âœ… (2025-11-12)
- [x] ë ˆë²¨ì—… ì‹œìŠ¤í…œ ì‘ë™ âœ… (2025-11-12)
- [x] ë§Œë£Œëœ í€˜ìŠ¤íŠ¸ ìë™ ì‚­ì œ âœ… (2025-11-12)
- [x] í€˜ìŠ¤íŠ¸ ì™„ë£Œ ìë™ ê°ì§€ ë° ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ âœ… (2025-11-12)
- [ ] í¬ì¸íŠ¸ íšë“ ì• ë‹ˆë©”ì´ì…˜ ì‘ë™ (Phase 7ì—ì„œ êµ¬í˜„ ì˜ˆì •)

#### êµ¬í˜„ ìƒì„¸ (2025-11-12 ì™„ë£Œ)

##### Phase 2 Part 1: Backend êµ¬í˜„ âœ…
**ì»¤ë°‹**: `3581c6d` - "feat: Implement Quest/Mission System UI (Phase 2 Part 2)"

- **Database Schema (Migration 15â†’16)**:
  - `daily_quests` í…Œì´ë¸” (12ê°œ ì»¬ëŸ¼, 3ê°œ ì¸ë±ìŠ¤)
  - `user_points` í…Œì´ë¸” (7ê°œ ì»¬ëŸ¼)
  - QuestType enum: MESSAGE_COUNT, SCENARIO_COMPLETE, VOICE_ONLY_SESSION, VOCABULARY_REVIEW, PRONUNCIATION_PRACTICE, GRAMMAR_ANALYSIS, NEW_SCENARIO

- **Repository Layer**:
  - `QuestRepository`: í€˜ìŠ¤íŠ¸ CRUD, ì§„í–‰ë¥  ì—…ë°ì´íŠ¸, í¬ì¸íŠ¸ ê´€ë¦¬
  - `incrementQuestProgressByType()`: íƒ€ì…ë³„ ìë™ ì—…ë°ì´íŠ¸ í—¬í¼ ë©”ì„œë“œ
  - ìë™ ì™„ë£Œ ë¡œì§: `currentValue >= targetValue` ì‹œ ìë™ ì™„ë£Œ
  - ë ˆë²¨ì—… ë¡œì§: 100í¬ì¸íŠ¸ = 1ë ˆë²¨

- **Domain Models**:
  - `Quest`: ì§„í–‰ë¥  ê³„ì‚° (`progress = currentValue / targetValue`)
  - `UserPoints`: ë‹¤ìŒ ë ˆë²¨ê¹Œì§€ í¬ì¸íŠ¸ ê³„ì‚°

##### Phase 2 Part 2: UI êµ¬í˜„ âœ…
**ì»¤ë°‹**: `3581c6d` - "feat: Implement Quest/Mission System UI (Phase 2 Part 2)"

- **QuestCard.kt**:
  - íƒ€ì…ë³„ ì•„ì´ì½˜ (Message, CheckCircle, Mic ë“±)
  - ì§„í–‰ë¥  ë°” (LinearProgressIndicator 6dp height)
  - ë³´ìƒ ë°°ì§€ (ì™„ë£Œ: ì´ˆë¡ìƒ‰, ë¯¸ì™„ë£Œ: ê³¨ë“œ)
  - `currentValue / targetValue` ì§„í–‰ ìƒíƒœ í‘œì‹œ

- **QuestSection.kt**:
  - í—¤ë”: "ì˜¤ëŠ˜ì˜ í€˜ìŠ¤íŠ¸" + ë ˆë²¨/í¬ì¸íŠ¸ í‘œì‹œ
  - ìƒìœ„ 3ê°œ í€˜ìŠ¤íŠ¸ë§Œ í‘œì‹œ
  - ì „ì²´ ë³´ê¸° ë²„íŠ¼ (í–¥í›„ í™•ì¥)

- **QuestViewModel.kt**:
  - `StateFlow<List<Quest>>`: ì‹¤ì‹œê°„ í€˜ìŠ¤íŠ¸ ëª©ë¡
  - `StateFlow<UserPoints?>`: ì‹¤ì‹œê°„ í¬ì¸íŠ¸/ë ˆë²¨
  - ìë™ í€˜ìŠ¤íŠ¸ ìƒì„± (ì¼ì¼ 3ê°œ, ë§¤ì¼ ìì • ê°±ì‹ )
  - í€˜ìŠ¤íŠ¸ ì™„ë£Œ ë‹¤ì´ì–¼ë¡œê·¸ ìƒíƒœ ê´€ë¦¬

- **HomeScreen.kt í†µí•©**:
  - QuestSection ì¶”ê°€ (Today's Learningê³¼ Recommended Scenarios ì‚¬ì´)
  - QuestCompletedDialog í‘œì‹œ
  - QuestViewModel ì£¼ì…

##### Phase 2 Part 3: ìë™ ì§„í–‰ë¥  ì¶”ì  âœ…
**ì»¤ë°‹**: `710cd9c` - "feat: Add automatic quest progress tracking (Phase 2 Part 3)"

- **ChatViewModel.kt**:
  - `QuestRepository` ì£¼ì…
  - **MESSAGE_COUNT ì¶”ì **: `sendJapaneseMessage()` ì™„ë£Œ ì‹œ ìë™ +1
  - **VOICE_ONLY_SESSION ì¶”ì **: `endVoiceOnlyMode()` ì™„ë£Œ ì‹œ ìë™ +1
  - ë°±ê·¸ë¼ìš´ë“œ ì½”ë£¨í‹´ìœ¼ë¡œ ë¹„ë™ê¸° ì—…ë°ì´íŠ¸ (UI ë¸”ë¡œí‚¹ ì—†ìŒ)

- **QuestViewModel.kt ìë™ ì™„ë£Œ ê°ì§€**:
  - `previousQuestCompletionState` ë§µìœ¼ë¡œ ì´ì „ ìƒíƒœ ì¶”ì 
  - `isCompleted` ì „í™˜ ê°ì§€ (false â†’ true)
  - ìë™ìœ¼ë¡œ `showQuestCompletedDialog = true` ì„¤ì •
  - ì¬ì‹œì‘ ì‹œ ì¤‘ë³µ í‘œì‹œ ë°©ì§€

- **í€˜ìŠ¤íŠ¸ íë¦„**:
  1. ì‚¬ìš©ì ì•¡ì…˜ (ë©”ì‹œì§€ ì „ì†¡/ìŒì„± ì„¸ì…˜ ì¢…ë£Œ)
  2. `questRepository.incrementQuestProgressByType()` í˜¸ì¶œ
  3. Repositoryì—ì„œ ìë™ ì™„ë£Œ ì²´í¬ ë° í¬ì¸íŠ¸ ì§€ê¸‰
  4. ViewModelì—ì„œ ì™„ë£Œ ê°ì§€ â†’ ë‹¤ì´ì–¼ë¡œê·¸ í‘œì‹œ
  5. ì‚¬ìš©ìê°€ ì¶•í•˜ ë©”ì‹œì§€ í™•ì¸

#### í–¥í›„ í™•ì¥ ê°€ëŠ¥ì„±

**ì¶”ê°€ í€˜ìŠ¤íŠ¸ íƒ€ì… êµ¬í˜„ ì˜ˆì •**:
- [ ] PRONUNCIATION_PRACTICE: `checkPronunciation()` ì¶”ì 
- [ ] GRAMMAR_ANALYSIS: `requestGrammarExplanation()` ì¶”ì 
- [ ] VOCABULARY_REVIEW: í”Œë˜ì‹œì¹´ë“œ ë³µìŠµ ì¶”ì 
- [ ] SCENARIO_COMPLETE: `completeConversation()` ì¶”ì 
- [ ] NEW_SCENARIO: `initConversation()` ì¶”ì 

**UI/UX ê°œì„  ì˜ˆì •**:
- [ ] í¬ì¸íŠ¸ íšë“ ì• ë‹ˆë©”ì´ì…˜ (Phase 7)
- [ ] ë ˆë²¨ì—… ì¶•í•˜ ì• ë‹ˆë©”ì´ì…˜
- [ ] í€˜ìŠ¤íŠ¸ íˆìŠ¤í† ë¦¬ í™”ë©´
- [ ] ì£¼ê°„ í€˜ìŠ¤íŠ¸ ì±Œë¦°ì§€

---

### Phase 3: ë¦¬ë”ë³´ë“œ & Achievement ğŸ†
**ì˜ˆìƒ ì‹œê°„**: 5ì‹œê°„
**ìš°ì„ ìˆœìœ„**: â­ Important

#### êµ¬í˜„ ë‚´ìš©
- ì£¼ê°„ ë¦¬ë”ë³´ë“œ í™”ë©´ (ìƒìœ„ 3ëª… ê°•ì¡° ë””ìì¸)
- Achievement ì‹œìŠ¤í…œ (ë°°ì§€, ë„ì „ê³¼ì œ)
- í”„ë¡œí•„ í™”ë©´ì— ë°°ì§€ ê°¤ëŸ¬ë¦¬

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

### Phase 4: í•™ìŠµ í†µê³„ ê³ ë„í™” ğŸ“ˆ
**ì˜ˆìƒ ì‹œê°„**: 6ì‹œê°„
**ìš°ì„ ìˆœìœ„**: â­ Important

#### êµ¬í˜„ ë‚´ìš©
- ì›”ë³„ ì§„í–‰ë¥  ê·¸ë˜í”„ (ê³¡ì„ í˜•, Bezier curve)
- ì£¼ê°„ í•™ìŠµëŸ‰ ë°” ì°¨íŠ¸
- í•™ìŠµ ì‹œê°„ í†µê³„ (ì´ë²ˆ ì£¼ vs ì§€ë‚œ ì£¼)
- íˆíŠ¸ë§µ ìº˜ë¦°ë” (GitHub ìŠ¤íƒ€ì¼)

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

### Phase 5: ì±„íŒ… í™”ë©´ ê°œì„  ğŸ’¬
**ì˜ˆìƒ ì‹œê°„**: 7ì‹œê°„
**ìš°ì„ ìˆœìœ„**: â­ Important

#### êµ¬í˜„ ë‚´ìš©
- ë©”ì‹œì§€ ë‚ ì§œ/ì‹œê°„ë³„ ê·¸ë£¹í•‘
- Swipe-to-Reply ì œìŠ¤ì²˜
- ë©”ì‹œì§€ ë°˜ì‘ (ì´ëª¨ì§€)
- ë©”ì‹œì§€ ì „ë‹¬ ìƒíƒœ í‘œì‹œ (ì „ì†¡ ì¤‘, ì „ì†¡ ì™„ë£Œ, ì‹¤íŒ¨)

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

### Phase 6: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” ğŸ§­ **ìµœìš°ì„ **
**ì˜ˆìƒ ì‹œê°„**: 3ì‹œê°„
**ìš°ì„ ìˆœìœ„**: ğŸ”¥ Critical

#### ëª©í‘œ
ì£¼ìš” í™”ë©´ì— ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ì¶”ê°€

#### êµ¬í˜„ ë‚´ìš©

##### 6.1 NavigationBar UI
**íŒŒì¼**: `presentation/navigation/BottomNavigationBar.kt` (ì‹ ê·œ)

```kotlin
@Composable
fun NihongoBottomNavigationBar(
    currentRoute: String,
    onNavigate: (String) -> Unit,
    modifier: Modifier = Modifier
) {
    NavigationBar(modifier = modifier) {
        // 1. í™ˆ (ëŒ€ì‹œë³´ë“œ)
        NavigationBarItem(
            selected = currentRoute == Screen.ScenarioList.route,
            onClick = { onNavigate(Screen.ScenarioList.route) },
            icon = {
                Icon(
                    imageVector = Icons.Default.Home,
                    contentDescription = "í™ˆ"
                )
            },
            label = { Text("í™ˆ") }
        )

        // 2. í•™ìŠµ (ë§ˆì§€ë§‰ ëŒ€í™” ì¬ê°œ)
        NavigationBarItem(
            selected = currentRoute.startsWith("chat"),
            onClick = { onNavigate("chat/resume") },  // íŠ¹ë³„í•œ ë¼ìš°íŠ¸
            icon = {
                Icon(
                    imageVector = Icons.Default.Chat,
                    contentDescription = "í•™ìŠµ"
                )
            },
            label = { Text("í•™ìŠµ") }
        )

        // 3. ë³µìŠµ (í”Œë˜ì‹œì¹´ë“œ)
        NavigationBarItem(
            selected = currentRoute == Screen.FlashcardReview.route,
            onClick = { onNavigate(Screen.FlashcardReview.route) },
            icon = {
                Icon(
                    imageVector = Icons.Default.School,
                    contentDescription = "ë³µìŠµ"
                )
            },
            label = { Text("ë³µìŠµ") }
        )

        // 4. í†µê³„
        NavigationBarItem(
            selected = currentRoute == Screen.Stats.route,
            onClick = { onNavigate(Screen.Stats.route) },
            icon = {
                Icon(
                    imageVector = Icons.Default.BarChart,
                    contentDescription = "í†µê³„"
                )
            },
            label = { Text("í†µê³„") }
        )

        // 5. í”„ë¡œí•„
        NavigationBarItem(
            selected = currentRoute == Screen.Profile.route,
            onClick = { onNavigate(Screen.Profile.route) },
            icon = {
                Icon(
                    imageVector = Icons.Default.Person,
                    contentDescription = "í”„ë¡œí•„"
                )
            },
            label = { Text("í”„ë¡œí•„") }
        )
    }
}
```

##### 6.2 MainActivity í†µí•©
**íŒŒì¼**: `MainActivity.kt` (ìˆ˜ì •)

```kotlin
@Composable
fun NihongoApp() {
    val navController = rememberNavController()
    val currentBackStackEntry by navController.currentBackStackEntryAsState()
    val currentRoute = currentBackStackEntry?.destination?.route

    // í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ì„ ìˆ¨ê²¨ì•¼ í•˜ëŠ” í™”ë©´ë“¤
    val hideBottomBarRoutes = setOf(
        Screen.Onboarding.route,
        Screen.UserSelection.route,
        // Chat í™”ë©´ë„ ìˆ¨ê¹€ (ì „ì²´ í™”ë©´ í•„ìš”)
    )

    val shouldShowBottomBar = currentRoute !in hideBottomBarRoutes &&
        !currentRoute.orEmpty().startsWith("chat/")

    Scaffold(
        bottomBar = {
            if (shouldShowBottomBar) {
                NihongoBottomNavigationBar(
                    currentRoute = currentRoute.orEmpty(),
                    onNavigate = { route ->
                        navController.navigate(route) {
                            // ë°±ìŠ¤íƒ ìµœì í™”
                            popUpTo(navController.graph.findStartDestination().id) {
                                saveState = true
                            }
                            launchSingleTop = true
                            restoreState = true
                        }
                    }
                )
            }
        }
    ) { paddingValues ->
        NihongoNavHost(
            navController = navController,
            modifier = Modifier.padding(paddingValues)
        )
    }
}
```

##### 6.3 "ë§ˆì§€ë§‰ ëŒ€í™” ì¬ê°œ" ë¡œì§
**íŒŒì¼**: `presentation/navigation/NihongoNavHost.kt` (ìˆ˜ì •)

```kotlin
composable("chat/resume") {
    // ViewModelì—ì„œ ë§ˆì§€ë§‰ ëŒ€í™” ì¡°íšŒ
    val viewModel: ResumeViewModel = hiltViewModel()
    val lastConversation by viewModel.lastConversation.collectAsState()

    LaunchedEffect(lastConversation) {
        if (lastConversation != null) {
            val conv = lastConversation!!
            navController.navigate("chat/${conv.userId}/${conv.scenarioId}") {
                popUpTo("chat/resume") { inclusive = true }
            }
        } else {
            // ëŒ€í™” ê¸°ë¡ì´ ì—†ìœ¼ë©´ ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ í™”ë©´ìœ¼ë¡œ
            navController.navigate(Screen.ScenarioList.route) {
                popUpTo("chat/resume") { inclusive = true }
            }
        }
    }

    // ë¡œë”© í™”ë©´
    Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
        CircularProgressIndicator()
    }
}
```

**íŒŒì¼**: `presentation/navigation/ResumeViewModel.kt` (ì‹ ê·œ)

```kotlin
@HiltViewModel
class ResumeViewModel @Inject constructor(
    private val repository: ConversationRepository,
    private val userPreferences: UserPreferences
) : ViewModel() {

    val lastConversation = repository.getLastConversation(userPreferences.currentUserId)
        .stateIn(
            scope = viewModelScope,
            started = SharingStarted.WhileSubscribed(5000),
            initialValue = null
        )
}

// Repositoryì— ë©”ì„œë“œ ì¶”ê°€
interface ConversationRepository {
    fun getLastConversation(userId: Long): Flow<Conversation?>
}

class ConversationRepositoryImpl {
    override fun getLastConversation(userId: Long): Flow<Conversation?> {
        return conversationDao.getLastConversation(userId)
            .map { it?.toDomainModel() }
    }
}

@Dao
interface ConversationDao {
    @Query("""
        SELECT * FROM conversations
        WHERE userId = :userId
        ORDER BY updatedAt DESC
        LIMIT 1
    """)
    fun getLastConversation(userId: Long): Flow<ConversationEntity?>
}
```

#### ì™„ë£Œ ì¡°ê±´
- [ ] NihongoBottomNavigationBar ì»´í¬ë„ŒíŠ¸ ì‘ë™
- [ ] MainActivity Scaffoldì— bottomBar í†µí•©
- [ ] í™”ë©´ë³„ bottomBar í‘œì‹œ/ìˆ¨ê¹€ ë¡œì§ ì‘ë™
- [ ] "í•™ìŠµ" íƒ­ì—ì„œ ë§ˆì§€ë§‰ ëŒ€í™” ì¬ê°œ ê¸°ëŠ¥ ì‘ë™
- [ ] ë„¤ë¹„ê²Œì´ì…˜ ë°±ìŠ¤íƒ ìµœì í™” (saveState, restoreState)
- [ ] ì„ íƒëœ íƒ­ í•˜ì´ë¼ì´íŠ¸ ì‘ë™

---

### Phase 7: ë§ˆì´í¬ë¡œ ì• ë‹ˆë©”ì´ì…˜ âœ¨
**ì˜ˆìƒ ì‹œê°„**: 4ì‹œê°„
**ìš°ì„ ìˆœìœ„**: âœ… Optional

#### êµ¬í˜„ ë‚´ìš©
- ì¹´ë“œ press íš¨ê³¼ (scale ì• ë‹ˆë©”ì´ì…˜)
- ì§„í–‰ë¥  ë°” ì• ë‹ˆë©”ì´ì…˜ (ë¶€ë“œëŸ¬ìš´ ì¦ê°€)
- FAB í™•ì¥/ì¶•ì†Œ ì• ë‹ˆë©”ì´ì…˜
- í˜ì´ì§€ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

### Phase 8: ë‹¤í¬ ëª¨ë“œ ìµœì í™” ğŸŒ™
**ì˜ˆìƒ ì‹œê°„**: 3ì‹œê°„
**ìš°ì„ ìˆœìœ„**: âœ… Optional

#### êµ¬í˜„ ë‚´ìš©
- ì»¤ìŠ¤í…€ ë‹¤í¬ ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ (ìˆœìˆ˜ ê²€ì • í”¼í•¨)
- ë‹¤í¬ ëª¨ë“œ ì „ìš© ê·¸ë¼ë°ì´ì…˜
- ë©”ì‹œì§€ ë²„ë¸” ìƒ‰ìƒ ì¡°ì •
- ëŒ€ë¹„ ê°œì„ 

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

### Phase 9: ì˜¨ë³´ë”© ê°œì„  ğŸš€
**ì˜ˆìƒ ì‹œê°„**: 4ì‹œê°„
**ìš°ì„ ìˆœìœ„**: âœ… Optional

#### êµ¬í˜„ ë‚´ìš©
- Skip ë²„íŠ¼ ì¶”ê°€
- ì§„í–‰ í‘œì‹œ ê°•í™” (ë„íŠ¸ â†’ ë°”)
- ì¸í„°ë™í‹°ë¸Œ ì• ë‹ˆë©”ì´ì…˜
- íƒ€ì´í•‘ íš¨ê³¼

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

### Phase 10: Pull-to-Refresh & ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© â³
**ì˜ˆìƒ ì‹œê°„**: 3ì‹œê°„
**ìš°ì„ ìˆœìœ„**: âœ… Optional

#### êµ¬í˜„ ë‚´ìš©
- Pull-to-Refresh (Material 3)
- ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© (shimmer íš¨ê³¼)
- ëª¨ë“  ë¦¬ìŠ¤íŠ¸ í™”ë©´ì— ì ìš©

(ì„¸ë¶€ êµ¬í˜„ ë‚´ìš©ì€ ì‹¤ì œ ì‘ì—… ì‹œ ì‘ì„±)

---

## ğŸ“… êµ¬í˜„ ì¼ì • (ì œì•ˆ)

### Week 1: í•µì‹¬ ê¸°ëŠ¥ (Phase 1, 2, 6)
- **Day 1-2**: Phase 1 (í™ˆ ëŒ€ì‹œë³´ë“œ)
- **Day 3-4**: Phase 2 (í€˜ìŠ¤íŠ¸ ì‹œìŠ¤í…œ)
- **Day 5**: Phase 6 (í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜)

### Week 2: ì¤‘ìš” ê¸°ëŠ¥ (Phase 3, 4, 5)
- **Day 1**: Phase 3 (ë¦¬ë”ë³´ë“œ & Achievement)
- **Day 2-3**: Phase 4 (í•™ìŠµ í†µê³„ ê³ ë„í™”)
- **Day 4-5**: Phase 5 (ì±„íŒ… í™”ë©´ ê°œì„ )

### Week 3: ì„ íƒ ê¸°ëŠ¥ & ë§ˆë¬´ë¦¬ (Phase 7, 8, 9, 10)
- **Day 1**: Phase 7 (ë§ˆì´í¬ë¡œ ì• ë‹ˆë©”ì´ì…˜)
- **Day 2**: Phase 8 (ë‹¤í¬ ëª¨ë“œ ìµœì í™”)
- **Day 3**: Phase 9 (ì˜¨ë³´ë”© ê°œì„ )
- **Day 4**: Phase 10 (Pull-to-Refresh & ìŠ¤ì¼ˆë ˆí†¤)
- **Day 5**: í†µí•© í…ŒìŠ¤íŠ¸ & ë²„ê·¸ ìˆ˜ì •

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ

### ì‚¬ìš©ì ê²½í—˜ ê°œì„ 
- [ ] í•™ìŠµ ì§„í–‰ë¥ ì„ í™ˆ í™”ë©´ì—ì„œ ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥
- [ ] ì¼ì¼ í€˜ìŠ¤íŠ¸ë¡œ í•™ìŠµ ë™ê¸° ë¶€ì—¬ (ì™„ë£Œìœ¨ ëª©í‘œ: 70%)
- [ ] í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ìœ¼ë¡œ ì£¼ìš” í™”ë©´ ì ‘ê·¼ ì‹œê°„ 50% ë‹¨ì¶•
- [ ] ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ì¸í„°ë™ì…˜ ë§Œì¡±ë„ í–¥ìƒ

### ê¸°ìˆ ì  ì„±ê³¼
- [ ] ëª¨ë“  Phase 1-6 ê¸°ëŠ¥ ì‘ë™ (í•„ìˆ˜)
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µ (12 â†’ 13)
- [ ] ì„±ëŠ¥ ì €í•˜ ì—†ìŒ (60fps ìœ ì§€)
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ 10% ì´ë‚´ ì¦ê°€

### í•™ìŠµ ì§€ì†ì„±
- [ ] ì¼ì¼ í™œì„± ì‚¬ìš©ì(DAU) 30% ì¦ê°€
- [ ] í‰ê·  ì„¸ì…˜ ì‹œê°„ 20% ì¦ê°€
- [ ] 7ì¼ ë¦¬í…ì…˜ 40% â†’ 60% ê°œì„ 
- [ ] í€˜ìŠ¤íŠ¸ ì™„ë£Œìœ¨ 70% ì´ìƒ

---

## ğŸ“ ê°œë°œ ê°€ì´ë“œ

### ì½”ë”© ê·œì¹™
1. **Composable í•¨ìˆ˜ëª…**: PascalCase (ì˜ˆ: `LearningProgressCard`)
2. **State ë³€ìˆ˜**: camelCase with `by` delegation (ì˜ˆ: `val quests by viewModel.quests.collectAsState()`)
3. **ViewModel**: `@HiltViewModel` + `@Inject constructor`
4. **Repository**: Interface + Impl ë¶„ë¦¬
5. **DAO ì¿¼ë¦¬**: Multi-line raw string with proper indentation

### ì• ë‹ˆë©”ì´ì…˜ ê°€ì´ë“œ
- **Duration**: 200-300ms (ë¹ ë¥¸ í”¼ë“œë°±), 500-1000ms (í° ë³€í™”)
- **Easing**: `EaseOutCubic` (ì¼ë°˜), `Spring` (ë°”ìš´ìŠ¤ íš¨ê³¼)
- **AnimatedVisibility**: `fadeIn + scaleIn` (ë“±ì¥), `fadeOut + slideOut` (í‡´ì¥)
- **LaunchedEffect**: ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°ìš©, `delay()` í›„ ìƒíƒœ ë³€ê²½

### Database ê°€ì´ë“œ
- **Migration**: ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ í›„ ì»¤ë°‹
- **Index**: ìì£¼ ì¡°íšŒí•˜ëŠ” ì»¬ëŸ¼ì— ì¶”ê°€ (`userId`, `timestamp`, `isCompleted`)
- **Cascade**: Foreign Key ì„¤ì • ì‹œ `onDelete = CASCADE` ê³ ë ¤
- **Default ê°’**: Entityì—ëŠ” Kotlin default, SQLì—ëŠ” DEFAULT ì‚¬ìš© ìì œ

### ì„±ëŠ¥ ìµœì í™”
- **LazyColumn**: `key` íŒŒë¼ë¯¸í„° í•„ìˆ˜
- **remember**: ê³„ì‚° ë¹„ìš©ì´ ë†’ì€ ê°’ì€ `rememberSaveable`
- **derivedStateOf**: ë³µì¡í•œ ê³„ì‚°ì„ ìºì‹±
- **Flow.stateIn**: ViewModelì—ì„œ StateFlowë¡œ ë³€í™˜ ì‹œ ì‚¬ìš©

---

## ğŸ› ì˜ˆìƒ ì´ìŠˆ & í•´ê²°ë²•

### Issue 1: Database Migration ì‹¤íŒ¨
**ì¦ìƒ**: ì•± í¬ë˜ì‹œ, `IllegalStateException: Migration didn't properly handle`

**í•´ê²°**:
1. Entity ì •ì˜ì™€ Migration SQLì´ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸
2. ì¸ë±ìŠ¤ë¥¼ Entity `@Index`ì— ëª…ì‹œ
3. DEFAULT ê°’ì€ Kotlinì—ì„œ ì²˜ë¦¬, SQLì—ì„œ ì‚¬ìš© ìì œ
4. ì™„ì „ ì¬ì„¤ì¹˜ë¡œ í…ŒìŠ¤íŠ¸: `adb uninstall com.nihongo.conversation`

### Issue 2: í€˜ìŠ¤íŠ¸ ì§„í–‰ë¥ ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ
**ì›ì¸**: ChatViewModelì—ì„œ `questRepository.updateQuestProgress()` í˜¸ì¶œ ëˆ„ë½

**í•´ê²°**:
```kotlin
fun sendMessage(text: String) {
    viewModelScope.launch {
        // ë©”ì‹œì§€ ì „ì†¡ ë¡œì§...

        // âœ… í€˜ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ ì¶”ê°€
        updateQuestProgress()
    }
}
```

### Issue 3: í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ì´ íŠ¹ì • í™”ë©´ì—ì„œ í‘œì‹œë¨
**ì›ì¸**: `shouldShowBottomBar` ì¡°ê±´ì— í™”ë©´ ì¶”ê°€ ëˆ„ë½

**í•´ê²°**:
```kotlin
val hideBottomBarRoutes = setOf(
    Screen.Onboarding.route,
    Screen.UserSelection.route,
    // âœ… ì¶”ê°€ í•„ìš”í•œ í™”ë©´
    Screen.CreateScenario.route
)
```

### Issue 4: í¬ì¸íŠ¸ íšë“ ì• ë‹ˆë©”ì´ì…˜ì´ ë©ˆì¶¤
**ì›ì¸**: `onComplete` ì½œë°± ë¯¸ì‹¤í–‰

**í•´ê²°**:
```kotlin
LaunchedEffect(Unit) {
    isVisible = true
    delay(2000)
    isVisible = false
    delay(300)  // fadeOut ì™„ë£Œ ëŒ€ê¸°
    onComplete()  // âœ… ë°˜ë“œì‹œ í˜¸ì¶œ
}
```

---

## ğŸ“š ì°¸ê³  ìë£Œ

### Material 3 Components
- [NavigationBar](https://m3.material.io/components/navigation-bar)
- [Linear Progress Indicator](https://m3.material.io/components/progress-indicators)
- [Cards](https://m3.material.io/components/cards)

### Jetpack Compose
- [AnimatedVisibility](https://developer.android.com/jetpack/compose/animation)
- [LazyColumn Performance](https://developer.android.com/jetpack/compose/lists)
- [State Management](https://developer.android.com/jetpack/compose/state)

### Room Database
- [Migration Guide](https://developer.android.com/training/data-storage/room/migrating-db-versions)
- [DAO Best Practices](https://developer.android.com/training/data-storage/room/accessing-data)

---

## âœ… Checklist (Phase 1-2-6 ì™„ë£Œ í›„)

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] ëŒ€ì‹œë³´ë“œ ì¹´ë“œë“¤ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨
- [ ] ìŠ¤íŠ¸ë¦­ì´ ì •í™•íˆ ê³„ì‚°ë¨ (ë§¤ì¼ ìì • ë¦¬ì…‹)
- [ ] ì¼ì¼ ëª©í‘œ ì§„í–‰ë¥ ì´ ì •í™•í•¨
- [ ] í€˜ìŠ¤íŠ¸ê°€ ìë™ ìƒì„±ë¨ (ë§¤ì¼ ìì •)
- [ ] í€˜ìŠ¤íŠ¸ ì™„ë£Œ ì‹œ í¬ì¸íŠ¸ ì§€ê¸‰ ë° ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ
- [ ] ë ˆë²¨ì—… ì‹œ ì•Œë¦¼
- [ ] í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ìœ¼ë¡œ ëª¨ë“  ì£¼ìš” í™”ë©´ ì´ë™ ê°€ëŠ¥
- [ ] "í•™ìŠµ" íƒ­ì—ì„œ ë§ˆì§€ë§‰ ëŒ€í™” ì¬ê°œ

### ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í™ˆ í™”ë©´ ë¡œë”© ì‹œê°„ < 1ì´ˆ
- [ ] ìŠ¤í¬ë¡¤ 60fps ìœ ì§€
- [ ] ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¦ê°€ < 10%
- [ ] ë°°í„°ë¦¬ ì†Œëª¨ ì •ìƒ

### UI/UX í…ŒìŠ¤íŠ¸
- [ ] ë‹¤í¬ ëª¨ë“œì—ì„œ ëª¨ë“  ì¹´ë“œ ê°€ë…ì„± í™•ì¸
- [ ] íƒœë¸”ë¦¿ì—ì„œ ë ˆì´ì•„ì›ƒ ì •ìƒ í‘œì‹œ
- [ ] ê¸´ í…ìŠ¤íŠ¸ ì²˜ë¦¬ (ellipsis)
- [ ] ì• ë‹ˆë©”ì´ì…˜ ë¶€ë“œëŸ¬ì›€

### ë²„ê·¸ í™•ì¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì„±ê³µ
- [ ] ì•± ì¬ì‹œì‘ ì‹œ ë°ì´í„° ìœ ì§€
- [ ] ê¶Œí•œ ê±°ë¶€ ì‹œ ì •ìƒ ì²˜ë¦¬
- [ ] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ Fallback

---

ì´ ë¬¸ì„œëŠ” **ì‚´ì•„ìˆëŠ” ë¬¸ì„œ**ì…ë‹ˆë‹¤. ê° Phaseë¥¼ êµ¬í˜„í•˜ë©´ì„œ ë°œê²¬í•œ ì´ìŠˆ, ê°œì„  ì‚¬í•­, ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ê³„ì† ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
