# ğŸ—¾ ì¼ë³¸ì–´ íšŒí™” í•™ìŠµ ì•± (NihonGo Conversation)

[![Kotlin](https://img.shields.io/badge/kotlin-1.9.0-blue.svg)](https://kotlinlang.org)
[![Android](https://img.shields.io/badge/Android-API_24+-green.svg)](https://developer.android.com)
[![Gemini](https://img.shields.io/badge/Gemini-2.5_Flash-purple.svg)](https://ai.google.dev)

AI ê¸°ë°˜ ì¼ë³¸ì–´ íšŒí™” í•™ìŠµì„ ìœ„í•œ ê°œì¸ìš© Android ì• í”Œë¦¬ì¼€ì´ì…˜

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥

- ğŸ¤– **AI ëŒ€í™” íŒŒíŠ¸ë„ˆ**: Gemini 2.5 Flashë¥¼ í™œìš©í•œ ìì—°ìŠ¤ëŸ¬ìš´ ì¼ë³¸ì–´ ëŒ€í™”
- ğŸ’­ **ë§¥ë½ ê¸°ì–µ**: ì´ì „ ëŒ€í™”ë¥¼ ê¸°ì–µí•˜ê³  ê´€ê³„ë¥¼ ì´ì–´ê°€ëŠ” ì¹œêµ¬ ê°™ì€ AI
- ğŸ’¡ **AI íŒíŠ¸ ì‹œìŠ¤í…œ**: í•œêµ­ì–´-ì¼ë³¸ì–´ ë²ˆì—­ íŒíŠ¸, ë¡œë§ˆì í‘œê¸°, ë¬¸ë§¥ ê¸°ë°˜ ì œì•ˆ
- ğŸ“– **ë¬¸ë²• ì„¤ëª… ê¸°ëŠ¥**: ë©”ì‹œì§€ ê¸¸ê²Œ ëˆ„ë¥´ê¸°ë¡œ ì¦‰ì‹œ ë¬¸ë²• ë¶„ì„, ìƒ‰ìƒë³„ êµ¬ë¬¸ ê°•ì¡°, ìºì‹±ìœ¼ë¡œ ì¦‰ì‹œ ì¬ë¡œë”©
- ğŸŒ **ë©”ì‹œì§€ë³„ ë²ˆì—­**: ê° AI ë©”ì‹œì§€ë§ˆë‹¤ í•œêµ­ì–´ ë²ˆì—­ ë²„íŠ¼, ì„ íƒì  ë²ˆì—­ í™•ì¸
- ğŸ’¾ **ëŒ€í™” ê´€ë¦¬**: ëŒ€í™” ì¢…ë£Œ ë²„íŠ¼, íˆìŠ¤í† ë¦¬ ìë™ ì €ì¥, ìƒˆ ëŒ€í™” ì‹œì‘ ê¸°ëŠ¥
- ğŸ­ **6ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤**: ë ˆìŠ¤í† ë‘, ì‡¼í•‘, í˜¸í…”, ì¹œêµ¬ ë§Œë“¤ê¸°, ì „í™” ëŒ€í™”, ë³‘ì› (ì´ˆê¸‰/ì¤‘ê¸‰/ìƒê¸‰)
- ğŸ™ï¸ **ìŒì„± ì§€ì›**: STTë¡œ ì¼ë³¸ì–´ ìŒì„± ì¸ì‹, TTSë¡œ AI ì‘ë‹µ ìë™ ì¬ìƒ, ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜
- âš™ï¸ **ì„¤ì • ì‹œìŠ¤í…œ**: ë‚œì´ë„ ì¡°ì ˆ (1-3), ìŒì„± ì†ë„ (0.5x-2.0x), ìë™ ì½ê¸°, ë¡œë§ˆì í‘œì‹œ
- ğŸ¯ **ë‚œì´ë„ ì¡°ì ˆ**: JLPT ë ˆë²¨ë³„ AI ì‘ë‹µ (N5-N4/N3-N2/N1), ì–´íœ˜ ë³µì¡ë„ ë¶„ì„, ë³„ì  í‘œì‹œ
- ğŸ“Š **í•™ìŠµ í†µê³„**: ì¼ì¼/ì£¼ê°„/ì›”ê°„ ì§„ë„, ì—°ì† í•™ìŠµì¼ ì¶”ì , ì‹œë‚˜ë¦¬ì˜¤ë³„ ì§„í–‰ë¥ , ì°¨íŠ¸ ì‹œê°í™”
- ğŸ”¥ **ë³µìŠµ ëª¨ë“œ**: ì™„ë£Œëœ ëŒ€í™” ì¬ìƒ, ë‚ ì§œë³„ ê·¸ë£¹í™”, ì¤‘ìš” ë¬¸êµ¬ ì¶”ì¶œ, ë©”ì‹œì§€ ì¬ìƒ
- ğŸ‘¤ **ì‚¬ìš©ì í”„ë¡œí•„**: ì•„ë°”íƒ€ ì„ íƒ, í•™ìŠµ ëª©í‘œ, ê°œì¸í™”ëœ AI ì‘ë‹µ
- âœ¨ **ì„¸ë ¨ëœ UI**: Material 3 ë””ìì¸, íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°, ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜, ë©”ì‹œì§€ íƒ€ì„ìŠ¤íƒ¬í”„

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### í•„ìš” ì‚¬í•­
- Android Studio Hedgehog (2023.1.1) ì´ìƒ
- Android SDK 24 ì´ìƒ
- Kotlin 1.9.0 ì´ìƒ
- Gemini API í‚¤ ([ë°œê¸‰í•˜ê¸°](https://makersuite.google.com/app/apikey))

### ì„¤ì¹˜ ë°©ë²•

1. **í”„ë¡œì íŠ¸ í´ë¡ **
```bash
git clone https://github.com/yourusername/nihongo-conversation.git
cd nihongo-conversation
```

2. **API í‚¤ ì„¤ì •**
```properties
# local.properties íŒŒì¼ ìƒì„±
GEMINI_API_KEY=your_api_key_here
```

3. **ë¹Œë“œ ë° ì‹¤í–‰**
```bash
./gradlew assembleDebug
# ë˜ëŠ” Android Studioì—ì„œ ì§ì ‘ ì‹¤í–‰
```

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
app/
â”œâ”€â”€ src/main/java/com/nihongo/conversation/
â”‚   â”œâ”€â”€ data/                 # ë°ì´í„° ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ local/            # Room DB
â”‚   â”‚   â”œâ”€â”€ remote/           # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ repository/       # Repository êµ¬í˜„
â”‚   â”œâ”€â”€ domain/               # ë„ë©”ì¸ ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ model/            # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ usecase/          # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ repository/       # Repository ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ presentation/         # í”„ë ˆì  í…Œì´ì…˜ ë ˆì´ì–´
â”‚   â”‚   â”œâ”€â”€ ui/               # Compose UI
â”‚   â”‚   â”œâ”€â”€ viewmodel/        # ViewModels
â”‚   â”‚   â””â”€â”€ theme/            # í…Œë§ˆ ì„¤ì •
â”‚   â””â”€â”€ core/                 # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ di/               # Dependency Injection
â”‚       â””â”€â”€ utils/            # í—¬í¼ í•¨ìˆ˜
â””â”€â”€ build.gradle.kts
```

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

- **UI**: Jetpack Compose + Material 3
- **Architecture**: MVVM + Clean Architecture
- **DI**: Hilt (Dagger)
- **Database**: Room (SQLite)
- **Persistence**: DataStore Preferences
- **Network**: Retrofit + OkHttp
- **Async**: Coroutines + Flow
- **AI**: Gemini 2.5 Flash API
- **Voice**: Android SpeechRecognizer (STT) + TextToSpeech (TTS)

## ğŸ“± ì£¼ìš” í™”ë©´

### ëŒ€í™” í™”ë©´ (ChatScreen)
- ğŸ’¬ **ì±„íŒ… ì¸í„°í˜ì´ìŠ¤**: ë¹„ëŒ€ì¹­ ë¼ìš´ë“œ ëª¨ì„œë¦¬ ë©”ì‹œì§€ ë²„ë¸”, íƒ€ì„ìŠ¤íƒ¬í”„
- ğŸ™ï¸ **ìŒì„± ì…ë ¥**: í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜ ë§ˆì´í¬ ë²„íŠ¼, ì‹¤ì‹œê°„ ìŒì„± ì¸ì‹
- ğŸ”Š **ìë™ ìŒì„± ì¬ìƒ**: AI ì‘ë‹µ ìë™ ì½ê¸°, ë©”ì‹œì§€ í´ë¦­ìœ¼ë¡œ ì¬ìƒ
- ğŸ’¡ **AI íŒíŠ¸ ë‹¤ì´ì–¼ë¡œê·¸**: í•œêµ­ì–´-ì¼ë³¸ì–´ ë²ˆì—­, ë¡œë§ˆì, ì„¤ëª…
- ğŸ“– **ë¬¸ë²• ì„¤ëª…**: ë©”ì‹œì§€ ê¸¸ê²Œ ëˆ„ë¥´ê¸°ë¡œ ì¦‰ì‹œ ë¬¸ë²• ë¶„ì„ (ì•„ë˜ ì°¸ì¡°)
- â­ **ë³µì¡ë„ í‘œì‹œ**: AI ë©”ì‹œì§€ì— 1-5 ë³„ì ìœ¼ë¡œ ì–´íœ˜ ë‚œì´ë„ í‘œì‹œ
- âŒ¨ï¸ **ìŠ¤ë§ˆíŠ¸ ì…ë ¥**: ì—”í„°í‚¤ë¡œ ì „ì†¡, íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°
- âœ¨ **ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜**: Slide-in/fade-in ë©”ì‹œì§€, ì—ëŸ¬ í‘œì‹œ

### ë¬¸ë²• ì„¤ëª… ê¸°ëŠ¥ (GrammarBottomSheet)
- ğŸ–±ï¸ **ì¦‰ì‹œ ë¶„ì„**: ë©”ì‹œì§€ ê¸¸ê²Œ ëˆ„ë¥´ê¸°ë¡œ ë¬¸ë²• ë¶„ì„ ì‹œì‘
- ğŸ¨ **ìƒ‰ìƒ êµ¬ë¬¸ ê°•ì¡°**: 8ê°€ì§€ ë¬¸ë²• ìš”ì†Œë³„ ìƒ‰ìƒ ì½”ë”©
  - ğŸ”µ ì¡°ì‚¬ (ã¯, ãŒ, ã‚’, ã«, ã§, ã¨)
  - ğŸŸ¢ ë™ì‚¬ (é£Ÿã¹ã¾ã™, è¡Œã, è¦‹ã‚‹)
  - ğŸŸ  í˜•ìš©ì‚¬ (ãã‚Œã„, ãŠã„ã—ã„, é«˜ã„)
  - ğŸŸ£ ëª…ì‚¬ (æœ¬, äºº, å ´æ‰€)
  - ğŸ”´ ë³´ì¡°ë™ì‚¬ (ã¾ã™, ã§ã™, ã¦ã„ã‚‹)
  - ğŸ”· ì ‘ì†ì‚¬ (ãŒ, ã‘ã©, ã‹ã‚‰, ã®ã§)
  - ğŸŸ¡ ë¶€ì‚¬ (ã¨ã¦ã‚‚, ã‚†ã£ãã‚Š, ã‚ˆã)
  - ğŸŸ¤ í‘œí˜„ (ê´€ìš©êµ¬, íŒ¨í„´)
- ğŸ’¡ **ê°„ë‹¨ ì„¤ëª…**: ë¬¸ì¥ ì „ì²´ì˜ 1-2ì¤„ ìš”ì•½
- ğŸ“ **êµ¬ì„±ìš”ì†Œ ë¶„ì„**: ê° ë¬¸ë²• ìš”ì†Œì˜ í•œêµ­ì–´ ì„¤ëª… ì¹´ë“œ
- ğŸ“– **ìƒì„¸ ì„¤ëª…**: í¼ì³ë³´ê¸°ë¡œ ì‹¬í™” ë¬¸ë²• í•´ì„¤
- ğŸ’¬ **ëŒ€í™” ì˜ˆì‹œ**: í˜„ì¬ ëŒ€í™”ì—ì„œ ìœ ì‚¬í•œ ë¬¸ì¥ ì¶”ì¶œ
- ğŸ¯ **ê´€ë ¨ íŒ¨í„´**: í•¨ê»˜ ê³µë¶€í•˜ë©´ ì¢‹ì€ ë¬¸ë²• íŒ¨í„´ ì œì•ˆ
- ğŸ“ **ë ˆë²¨ë³„ ì„¤ëª…**: ì‚¬ìš©ì ë ˆë²¨ì— ë§ì¶˜ ì„¤ëª… ë‚œì´ë„

### ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ (ScenarioListScreen)
- ğŸ­ **6ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤**: ë ˆìŠ¤í† ë‘, ì‡¼í•‘, í˜¸í…”, ì¹œêµ¬, ì „í™”, ë³‘ì›
- ğŸ·ï¸ **ë‚œì´ë„ ë°°ì§€**: ì´ˆê¸‰(ì´ˆë¡)/ì¤‘ê¸‰(ë³´ë¼)/ìƒê¸‰(ë¹¨ê°•)
- ğŸ¨ **ì•„ì´ì½˜ ë””ìì¸**: ê° ì‹œë‚˜ë¦¬ì˜¤ë³„ ì»¤ìŠ¤í…€ ì•„ì´ì½˜
- âš™ï¸ **ì„¤ì • ë²„íŠ¼**: TopAppBarì—ì„œ ë¹ ë¥¸ ì ‘ê·¼

### ì„¤ì • í™”ë©´ (SettingsScreen)
- ğŸ“ˆ **ë‚œì´ë„ ë ˆë²¨**: 1-3ë‹¨ê³„ ìŠ¬ë¼ì´ë” (ì´ˆê¸‰/ì¤‘ê¸‰/ìƒê¸‰)
- âš¡ **ìŒì„± ì†ë„**: 0.5x-2.0x ì¡°ì ˆ (0.1x ë‹¨ìœ„)
- ğŸ”Š **ìë™ ì½ê¸° í† ê¸€**: AI ì‘ë‹µ ìë™ ìŒì„± ì¬ìƒ on/off
- ğŸŒ **ë¡œë§ˆì í‘œì‹œ í† ê¸€**: íŒíŠ¸ ë¡œë§ˆì í‘œì‹œ ì œì–´
- ğŸ’¾ **ìë™ ì €ì¥**: DataStoreë¡œ ëª¨ë“  ì„¤ì • ì˜êµ¬ ì €ì¥

### ë³µìŠµ í™”ë©´ (ReviewScreen)
- ğŸ“… **ë‚ ì§œë³„ ê·¸ë£¹**: ì˜¤ëŠ˜/ì–´ì œ/íŠ¹ì • ë‚ ì§œë¡œ ëŒ€í™” ê·¸ë£¹í™”
- ğŸ­ **ì‹œë‚˜ë¦¬ì˜¤ í‘œì‹œ**: ë‚œì´ë„ ë°°ì§€ì™€ ì‹œë‚˜ë¦¬ì˜¤ ì •ë³´
- ğŸ“– **í™•ì¥ ê°€ëŠ¥ ì¹´ë“œ**: íƒ­ìœ¼ë¡œ ì „ì²´ ëŒ€í™” ë³´ê¸°
- ğŸ”Š **ë©”ì‹œì§€ ì¬ìƒ**: AI ë©”ì‹œì§€ TTS ì¬ìƒ
- â­ **ì¤‘ìš” ë¬¸êµ¬**: ìë™ ì¶”ì¶œëœ í•µì‹¬ ì¼ë³¸ì–´ í‘œí˜„ (ìµœëŒ€ 5ê°œ)
- âœ¨ **ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜**: í™•ì¥/ì¶•ì†Œ ì „í™˜ íš¨ê³¼

### í†µê³„ í™”ë©´ (StatsScreen)
- ğŸ”¥ **ì—°ì† í•™ìŠµì¼**: í˜„ì¬ ì—°ì† ê¸°ë¡ê³¼ ìµœê³  ê¸°ë¡ í‘œì‹œ
- ğŸ“Š **ë§‰ëŒ€ ì°¨íŠ¸**: ì¼ì¼ í•™ìŠµ ì‹œê°„ (ë¶„ ë‹¨ìœ„)
- ğŸ“ˆ **ì„  ì°¨íŠ¸**: ì¼ì¼ ë©”ì‹œì§€ ìˆ˜ ì¶”ì„¸
- ğŸ¥§ **íŒŒì´ ì°¨íŠ¸**: ì‹œë‚˜ë¦¬ì˜¤ë³„ ì™„ë£Œìœ¨ ë¶„í¬
- ğŸ“… **ì£¼ê°„/ì›”ê°„ ë·°**: í•„í„° ì¹©ìœ¼ë¡œ ê¸°ê°„ ì„ íƒ
- ğŸ’¯ **ì´ê³„ í†µê³„**: ì „ì²´ ëŒ€í™” ìˆ˜, ë©”ì‹œì§€ ìˆ˜, í•™ìŠµ ì‹œê°„
- ğŸ¨ **Canvas API ì°¨íŠ¸**: ì»¤ìŠ¤í…€ ê·¸ë˜í”½ ì‹œê°í™”

## âœ¨ ìµœì‹  ì—…ë°ì´íŠ¸ (ChatScreen Polish)

### íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„° (`TypingIndicator.kt`)
```kotlin
// AIê°€ ë©”ì‹œì§€ë¥¼ ìƒì„± ì¤‘ì¼ ë•Œ í‘œì‹œë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜
- 3ê°œì˜ ì ì´ ìˆœì°¨ì ìœ¼ë¡œ í¬ê¸° ë³€í™” (0.5f â†’ 1.0f)
- ê° ì ë§ˆë‹¤ 150ms ì§€ì—°ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ íŒŒë™ íš¨ê³¼
- SecondaryContainer ë°°ê²½ì˜ ë‘¥ê·¼ ë§í’ì„  ì•ˆì— í‘œì‹œ
```

### ë©”ì‹œì§€ ì• ë‹ˆë©”ì´ì…˜
```kotlin
AnimatedVisibility(
    enter = slideInVertically(initialOffsetY = { it / 2 }) + fadeIn(),
    exit = slideOutVertically() + fadeOut()
)
// ìƒˆ ë©”ì‹œì§€ê°€ ì•„ë˜ì—ì„œ ìŠ¬ë¼ì´ë“œ ì—…ë˜ë©° í˜ì´ë“œ ì¸
```

### ë©”ì‹œì§€ ë²„ë¸” ë””ìì¸ ê°œì„ 
- **ë¹„ëŒ€ì¹­ ëª¨ì„œë¦¬**: ì‚¬ìš©ì ë©”ì‹œì§€ëŠ” ì˜¤ë¥¸ìª½ í•˜ë‹¨, AI ë©”ì‹œì§€ëŠ” ì™¼ìª½ í•˜ë‹¨ì´ ë¾°ì¡± (ê¼¬ë¦¬ íš¨ê³¼)
- **íƒ€ì„ìŠ¤íƒ¬í”„**: HH:mm í˜•ì‹ìœ¼ë¡œ ê° ë©”ì‹œì§€ì— í‘œì‹œ
- **Tonal Elevation**: 1dp ì…ì²´ê°ìœ¼ë¡œ ê¹Šì´ ì¶”ê°€
- **ìµœëŒ€ ë„ˆë¹„**: 280dpë¡œ ì œí•œí•˜ì—¬ ê°€ë…ì„± í™•ë³´
- **ìƒ‰ìƒ ëŒ€ë¹„**: onPrimaryContainer/onSecondaryContainerë¡œ ëª…í™•í•œ í…ìŠ¤íŠ¸

### ì—ëŸ¬ í‘œì‹œ ê°œì„ 
```kotlin
// ì• ë‹ˆë©”ì´ì…˜ ì—ëŸ¬ ì»¨í…Œì´ë„ˆ
- ErrorOutline ì•„ì´ì½˜ + ì—ëŸ¬ ë©”ì‹œì§€
- ErrorContainer ë°°ê²½ìƒ‰ìœ¼ë¡œ ì‹œê°ì  êµ¬ë¶„
- Slide-in/fade-in ì• ë‹ˆë©”ì´ì…˜ìœ¼ë¡œ ë¶€ë“œëŸ¬ìš´ í‘œì‹œ
```

### í‚¤ë³´ë“œ ì…ë ¥ UX
```kotlin
OutlinedTextField(
    keyboardOptions = KeyboardOptions(imeAction = ImeAction.Send),
    keyboardActions = KeyboardActions(onSend = { onSend() })
)
// í‚¤ë³´ë“œ ì—”í„°í‚¤(ì „ì†¡ ë²„íŠ¼)ë¡œ ë°”ë¡œ ë©”ì‹œì§€ ì „ì†¡ ê°€ëŠ¥
```

### ìŠ¤í˜ì´ì‹± ìµœì í™”
- ë©”ì‹œì§€ ê°„ê²©: 12dp (ì´ì „ 8dpì—ì„œ ì¦ê°€)
- LazyColumn ì»¨í…ì¸  íŒ¨ë”©: 16dp
- ìë™ ìŠ¤í¬ë¡¤: ìƒˆ ë©”ì‹œì§€ ì¶”ê°€ ì‹œ ì• ë‹ˆë©”ì´ì…˜ ìŠ¤í¬ë¡¤

## ğŸ†• ìµœì‹  ì—…ë°ì´íŠ¸ (2025-10-29) - ëŒ€í™” ê´€ë¦¬ ë° ë²ˆì—­ ê¸°ëŠ¥ ê°•í™”

### âœ¨ ìƒˆë¡œìš´ ê¸°ëŠ¥

**1. ëŒ€í™” ì¢…ë£Œ ë° ìƒˆ ëŒ€í™” ì‹œì‘**
- âœ… **"ãƒãƒ£ãƒƒãƒˆçµ‚äº†" ë²„íŠ¼**: ë©”ì‹œì§€ê°€ ìˆì„ ë•Œ TopAppBarì— ì²´í¬ë§ˆí¬(âœ“) ë²„íŠ¼ í‘œì‹œ
- âœ… **í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸**: ì‹¤ìˆ˜ ë°©ì§€ë¥¼ ìœ„í•œ í™•ì¸ ì ˆì°¨
- âœ… **ëŒ€í™” íˆìŠ¤í† ë¦¬ ìë™ ì €ì¥**: ì¢…ë£Œëœ ëŒ€í™”ëŠ” ë³µìŠµ ëª¨ë“œì—ì„œ í™•ì¸ ê°€ëŠ¥
- âœ… **ê¹¨ë—í•œ ì‹œì‘**: ì¢…ë£Œ í›„ ë™ì¼ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ ìƒˆ ëŒ€í™” ì‹œì‘

**2. ê°œì„ ëœ ë²ˆì—­ ê¸°ëŠ¥**
- âœ… **ë©”ì‹œì§€ë³„ ë²ˆì—­ ë²„íŠ¼**: ê° AI ë©”ì‹œì§€ë§ˆë‹¤ "í•œêµ­ì–´ ë²ˆì—­" ë²„íŠ¼ ì œê³µ
- âœ… **í† ê¸€ ë°©ì‹**: ì›í•˜ëŠ” ë©”ì‹œì§€ë§Œ ì„ íƒì ìœ¼ë¡œ ë²ˆì—­ í™•ì¸
- âœ… **ë²ˆì—­ ìºì‹±**: í•œ ë²ˆ ë²ˆì—­ëœ ë©”ì‹œì§€ëŠ” ì¦‰ì‹œ í‘œì‹œ
- âœ… **ê°„ê²°í•œ UI**: ë²„íŠ¼ í…ìŠ¤íŠ¸ê°€ "ë²ˆì—­ ìˆ¨ê¸°ê¸°"ë¡œ ë³€ê²½

**3. ë¬¸ë²• ì„¤ëª… ìºì‹±**
- âœ… **ì¦‰ì‹œ ë¡œë”©**: ê°™ì€ ë¬¸ì¥ì„ ë‹¤ì‹œ ê¸¸ê²Œ ëˆ„ë¥´ë©´ ìºì‹œì—ì„œ ì¦‰ì‹œ í‘œì‹œ
- âœ… **ìŠ¤í¬ë¡¤ ì•ˆì •ì„±**: ë¬¸ë²• ì‹œíŠ¸ê°€ ë” ì´ìƒ ìŠ¤í¬ë¡¤ë¡œ ì‚¬ë¼ì§€ì§€ ì•ŠìŒ
- âœ… **ì„±ëŠ¥ í–¥ìƒ**: API í˜¸ì¶œ ìµœì†Œí™”ë¡œ ë°ì´í„° ì ˆì•½

**4. ëŒ€í™” ì´ë ¥ ë³´ì¡´**
- âœ… **ìë™ ë³µì›**: ë³µìŠµ í™”ë©´ì—ì„œ ëŒì•„ì™€ë„ ëŒ€í™” ë‚´ìš© ìœ ì§€
- âœ… **ì‹œë‚˜ë¦¬ì˜¤ë³„ ê´€ë¦¬**: ê° ì‹œë‚˜ë¦¬ì˜¤ë§ˆë‹¤ ë…ë¦½ì ì¸ ëŒ€í™” ì„¸ì…˜
- âœ… **ìŠ¤ë§ˆíŠ¸ ì €ì¥**: ì‹¤ì œë¡œ ë©”ì‹œì§€ë¥¼ ë³´ë‚¼ ë•Œë§Œ ëŒ€í™” ìƒì„± (ë¹ˆ ëŒ€í™” ë°©ì§€)

**5. TTS ì•ˆì •ì„± ê°œì„ **
- âœ… **ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜**: ì´ˆê¸°í™” ì‹¤íŒ¨ ì‹œ ìë™ ì¬ì‹œë„
- âœ… **ì‹œë‚˜ë¦¬ì˜¤ ì „í™˜ ì•ˆì •í™”**: ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ë°”ê¿”ë„ TTSê°€ ê³„ì† ì‘ë™
- âœ… **ë” ë‚˜ì€ ì—ëŸ¬ ë©”ì‹œì§€**: ë¬¸ì œ ë°œìƒ ì‹œ êµ¬ì²´ì ì¸ í•´ê²° ë°©ë²• ì œì‹œ

### ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ ê°œì„ 

**Schema Version 2 ë§ˆì´ê·¸ë ˆì´ì…˜**:
```sql
ALTER TABLE conversations ADD COLUMN isCompleted INTEGER NOT NULL DEFAULT 0
```
- í™œì„± ëŒ€í™”(isCompleted = 0)ì™€ ì¢…ë£Œëœ ëŒ€í™”(isCompleted = 1) êµ¬ë¶„
- ê¸°ì¡´ ë°ì´í„° ìë™ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ë°ì´í„° ì†ì‹¤ ì—†ìŒ
- ë³µìŠµ ëª¨ë“œì—ì„œ ì¢…ë£Œëœ ëŒ€í™”ë§Œ í‘œì‹œ

### ğŸ’¡ ì‚¬ìš© ë°©ë²•

**ëŒ€í™” ì¢…ë£Œí•˜ê¸°**:
1. ì±„íŒ… ì¤‘ ìš°ì¸¡ ìƒë‹¨ì˜ ì²´í¬ë§ˆí¬(âœ“) ë²„íŠ¼ í´ë¦­
2. í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸ì—ì„œ "çµ‚äº†" ì„ íƒ
3. ëŒ€í™”ê°€ íˆìŠ¤í† ë¦¬ì— ì €ì¥ë˜ê³  ìƒˆ ëŒ€í™” ì‹œì‘

**ë²ˆì—­ ë³´ê¸°**:
1. AI ë©”ì‹œì§€ í•˜ë‹¨ì˜ "í•œêµ­ì–´ ë²ˆì—­" ë²„íŠ¼ í´ë¦­
2. ë²ˆì—­ì´ ë©”ì‹œì§€ ì•„ë˜ì— í‘œì‹œë¨
3. "ë²ˆì—­ ìˆ¨ê¸°ê¸°" ë²„íŠ¼ìœ¼ë¡œ ë‹¤ì‹œ ìˆ¨ê¸°ê¸°

**ë¬¸ë²• ì„¤ëª… ë¹ ë¥´ê²Œ ë³´ê¸°**:
1. AI ë©”ì‹œì§€ ê¸¸ê²Œ ëˆ„ë¥´ê¸°
2. ë‘ ë²ˆì§¸ë¶€í„°ëŠ” ìºì‹œì—ì„œ ì¦‰ì‹œ ë¡œë”©!

---

## ğŸ†• ì´ì „ ì—…ë°ì´íŠ¸ (2025-10) - TTS ë° í…ìŠ¤íŠ¸ ì •ì œ

### TTS (Text-to-Speech) ì‹œìŠ¤í…œ ëŒ€í­ ê°œì„ 

**ë¬¸ì œ í•´ê²°**:
- âœ… **"TTSæœªåˆæœŸåŒ–" ì—ëŸ¬ ì™„ì „ í•´ê²°**: ë¹„ë™ê¸° ì´ˆê¸°í™” ë¬¸ì œ ìˆ˜ì •
- âœ… **ë§ˆí¬ë‹¤ìš´ ê¸°í˜¸ ì œê±°**: AI ì‘ë‹µì—ì„œ `**í…ìŠ¤íŠ¸**`, `*ì´íƒ¤ë¦­*` ìë™ ì œê±°
- âœ… **í›„ë¦¬ê°€ë‚˜ ìë™ ì œê±°**: `ãŠå¸­ï¼ˆã›ãï¼‰` â†’ `ãŠå¸­` ìœ¼ë¡œ ì •ì œ
- âœ… **ì—ëŸ¬ ë©”ì‹œì§€ ê°œì„ **: êµ¬ì²´ì ì¸ í•´ê²° ë°©ë²• ì œì‹œ

**ìƒˆë¡œìš´ ê¸°ëŠ¥**:
1. **Pending Queue ì‹œìŠ¤í…œ**
   - TTSê°€ ì¤€ë¹„ë˜ê¸° ì „ ìŒì„± ìš”ì²­ì„ íì— ì €ì¥
   - ì´ˆê¸°í™” ì™„ë£Œ ì‹œ ìë™ìœ¼ë¡œ ì¬ìƒ
   - ì•± ì‹œì‘ ì§í›„ AI ì‘ë‹µë„ ì •ìƒ ì¬ìƒ

2. **ì¼ë³¸ì–´ ìŒì„± ë°ì´í„° ê°ì§€**
   - ë””ë°”ì´ìŠ¤ì— ì¼ë³¸ì–´ TTS ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ìë™ ê°ì§€
   - ì„¤ì¹˜ ë°©ë²•ì„ í¬í•¨í•œ ì¹œì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   - `ì„¤ì • > ì–¸ì–´ ë° ì…ë ¥ > ìŒì„± ì¶œë ¥ > ì¼ë³¸ì–´ ë‹¤ìš´ë¡œë“œ`

3. **í…ìŠ¤íŠ¸ ìë™ ì •ì œ**
   ```kotlin
   // AI ì‘ë‹µ ì˜ˆì‹œ (ìë™ ì •ì œë¨):
   // Before: "**å†·ãŸã„ï¼ˆã¤ã‚ãŸã„ï¼‰**é£²ã¿ç‰©ï¼ˆã®ã¿ã‚‚ã®ï¼‰"
   // After:  "å†·ãŸã„é£²ã¿ç‰©"
   ```

4. **Thread-Safe ì²˜ë¦¬**
   - ë™ì‹œì„± ë¬¸ì œ í•´ê²°ë¡œ ì•ˆì •ì„± í–¥ìƒ
   - ë©€í‹°ìŠ¤ë ˆë“œ í™˜ê²½ì—ì„œë„ ì•ˆì „í•œ TTS ë™ì‘

**ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì—…ë°ì´íŠ¸**:
- ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ì— í…ìŠ¤íŠ¸ í¬ë§· ê·œì¹™ ì¶”ê°€
- AIê°€ ë§ˆí¬ë‹¤ìš´ê³¼ í›„ë¦¬ê°€ë‚˜ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ëª…ì‹œì  ì§€ì‹œ
- 3ë‹¨ê³„ ë‚œì´ë„ ë ˆë²¨ ëª¨ë‘ ì ìš©

### ë¹Œë“œ ì„¤ì • ê°œì„ 

**ë©”ëª¨ë¦¬ ì„¤ì •** (`gradle.properties`):
```properties
# OutOfMemoryError ë°©ì§€
org.gradle.jvmargs=-Xmx4096m -XX:MaxMetaspaceSize=512m
org.gradle.daemon=true
org.gradle.parallel=true
```

**ì˜ì¡´ì„± ì—…ë°ì´íŠ¸** (`app/build.gradle.kts`):
```kotlin
// Material Icons ë¼ì´ë¸ŒëŸ¬ë¦¬
implementation("androidx.compose.material:material-icons-core:1.7.4")
implementation("androidx.compose.material:material-icons-extended:1.7.4")
```

## ğŸ› ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

### TTSê°€ ì‘ë™í•˜ì§€ ì•Šì„ ë•Œ

**ì¦ìƒ**: ìŒì„±ì´ ì¬ìƒë˜ì§€ ì•Šê±°ë‚˜ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

**í•´ê²° ë°©ë²•**:
1. **ì•± ì™„ì „ ì¬ì„¤ì¹˜** (ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”)
   ```bash
   adb uninstall com.nihongo.conversation
   # Android Studioì—ì„œ ë‹¤ì‹œ ì‹¤í–‰
   ```

2. **ì¼ë³¸ì–´ ìŒì„± ë°ì´í„° ì„¤ì¹˜ í™•ì¸**
   - ë””ë°”ì´ìŠ¤ ì„¤ì • â†’ ì–¸ì–´ ë° ì…ë ¥
   - ìŒì„± ì¶œë ¥ â†’ TTS ì—”ì§„ ì„¤ì •
   - ì¼ë³¸ì–´ ìŒì„± ë°ì´í„° ë‹¤ìš´ë¡œë“œ

3. **ë³¼ë¥¨ í™•ì¸**
   - ë¯¸ë””ì–´ ë³¼ë¥¨ì´ ì¼œì ¸ ìˆëŠ”ì§€ í™•ì¸
   - ë¬´ìŒ ëª¨ë“œ í•´ì œ

4. **ìë™ ìŒì„± ì¬ìƒ ì„¤ì •**
   - ì„¤ì • í™”ë©´ì—ì„œ "ìë™ ì½ê¸°" í† ê¸€ í™•ì¸
   - ì˜¤ë¥¸ìª½ ìƒë‹¨ ìŠ¤í”¼ì»¤ ì•„ì´ì½˜ í™•ì¸

### AIê°€ ì´ìƒí•œ ê¸°í˜¸ë¥¼ í‘œì‹œí•  ë•Œ

**ì¦ìƒ**: `**í…ìŠ¤íŠ¸**` ë˜ëŠ” `ï¼ˆãµã‚ŠãŒãªï¼‰` í‘œì‹œ

**ì›ì¸**: ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ëœ ì´ì „ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì‚¬ìš© ì¤‘

**í•´ê²° ë°©ë²•**:
```bash
# ì•± ì¬ì„¤ì¹˜ë¡œ ìƒˆ í”„ë¡¬í”„íŠ¸ ì ìš©
adb uninstall com.nihongo.conversation
# Android Studioì—ì„œ ë‹¤ì‹œ ì‹¤í–‰
```

ì¬ì„¤ì¹˜ í›„ ìë™ìœ¼ë¡œ:
- âœ… ìƒˆë¡œìš´ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì ìš©
- âœ… AI ì‘ë‹µ í…ìŠ¤íŠ¸ ì •ì œ ê¸°ëŠ¥ í™œì„±í™”
- âœ… TTS í›„ë¦¬ê°€ë‚˜ ì œê±° ê¸°ëŠ¥ í™œì„±í™”

### ì‹œë‚˜ë¦¬ì˜¤ ë‚´ìš© í™•ì¸

**"é›»è©±ã§ã®ä¼šè©±" ì‹œë‚˜ë¦¬ì˜¤**:
- ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” **ë ˆìŠ¤í† ë‘/ì‚´ë¡± ì˜ˆì•½ ì „í™” ì—°ìŠµ**ìš©ì…ë‹ˆë‹¤
- AIê°€ "ë ˆìŠ¤í† ë‘ì…ë‹ˆë‹¤"ë¼ê³  ì‘ë‹µí•˜ëŠ” ê²ƒì´ ì •ìƒì…ë‹ˆë‹¤
- ì‚¬ìš©ìëŠ” ì „í™”ë¡œ ì˜ˆì•½í•˜ëŠ” ì—­í• ì„ ì—°ìŠµí•©ë‹ˆë‹¤

**ì‹œë‚˜ë¦¬ì˜¤ êµ¬ì„±**:
1. ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§ã®æ³¨æ–‡ - ë ˆìŠ¤í† ë‘ì—ì„œ ì§ì ‘ ì£¼ë¬¸
2. è²·ã„ç‰© - ì‡¼í•‘
3. ãƒ›ãƒ†ãƒ«ã§ã®ãƒã‚§ãƒƒã‚¯ã‚¤ãƒ³ - í˜¸í…” ì²´í¬ì¸
4. å‹é”ã‚’ä½œã‚‹ - ì¹œêµ¬ ë§Œë“¤ê¸°
5. **é›»è©±ã§ã®ä¼šè©±** - ì „í™”ë¡œ ì˜ˆì•½í•˜ê¸° (ë ˆìŠ¤í† ë‘/ì‚´ë¡±)
6. ç—…é™¢ã§ - ë³‘ì› ë°©ë¬¸

## ğŸ”§ ê°œë°œ ê°€ì´ë“œ

### Claude Code CLI ì‚¬ìš©ë²•

1. **ì„¸ì…˜ ì‹œì‘**
```bash
claude-code "Continue ì¼ë³¸ì–´ íšŒí™” ì•± development"
```

2. **ì»¨í…ìŠ¤íŠ¸ ìœ ì§€**
```bash
# ì²´í¬í¬ì¸íŠ¸ ì €ì¥
.claude/session_manager.sh save

# ì²´í¬í¬ì¸íŠ¸ ë³µì›
.claude/session_manager.sh restore [checkpoint_id]
```

3. **íš¨ìœ¨ì ì¸ ì‘ì—…**
- Sonnet ì‚¬ìš©: UI êµ¬í˜„, í…ŒìŠ¤íŠ¸, ë²„ê·¸ ìˆ˜ì •
- Opus ì‚¬ìš©: ì•„í‚¤í…ì²˜ ì„¤ê³„, ë³µì¡í•œ ë¡œì§

### ë¹Œë“œ ì„¤ì •

```kotlin
// app/build.gradle.kts
android {
    compileSdk = 34
    
    defaultConfig {
        applicationId = "com.nihongo.conversation"
        minSdk = 24
        targetSdk = 34
        versionCode = 1
        versionName = "1.0.0"
    }
    
    buildFeatures {
        compose = true
        buildConfig = true
    }
}
```

## ğŸ“Š ê°œë°œ ë¡œë“œë§µ

### âœ… Phase 1: MVP (ì™„ë£Œ)
- [x] í”„ë¡œì íŠ¸ ì„¤ì • (Kotlin + Compose + Hilt)
- [x] Gemini API ì—°ë™ (2.5 Flash)
- [x] ê¸°ë³¸ ì±„íŒ… UI (Material 3)
- [x] Room ë°ì´í„°ë² ì´ìŠ¤ (ëŒ€í™”/ë©”ì‹œì§€ ì €ì¥)
- [x] Navigation êµ¬ì¡°

### âœ… Phase 2: í•µì‹¬ ê¸°ëŠ¥ (ì™„ë£Œ)
- [x] STT/TTS í†µí•© (ì¼ë³¸ì–´ ìŒì„± ì¸ì‹/ì¬ìƒ)
- [x] VoiceManager (ìŒì„± ìƒíƒœ ê´€ë¦¬)
- [x] AI íŒíŠ¸ ì‹œìŠ¤í…œ (ë¬¸ë§¥ ê¸°ë°˜ ì œì•ˆ)
- [x] í•œêµ­ì–´-ì¼ë³¸ì–´ ë²ˆì—­ ë‹¤ì´ì–¼ë¡œê·¸
- [x] 6ê°€ì§€ ì‹¤ìƒí™œ ì‹œë‚˜ë¦¬ì˜¤
- [x] ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ í™”ë©´
- [x] ì„¤ì • ì‹œìŠ¤í…œ (DataStore)
- [x] ë‚œì´ë„ ì¡°ì ˆ (1-3 ë ˆë²¨)
- [x] ìŒì„± ì†ë„ ì œì–´ (0.5x-2.0x)
- [x] ChatScreen UX í´ë¦¬ì‹± (ì• ë‹ˆë©”ì´ì…˜, íƒ€ì´í•‘ ì¸ë””ì¼€ì´í„°)

### âœ… Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (ì™„ë£Œ)
- [x] ë³µìŠµ ëª¨ë“œ (ì €ì¥ëœ ëŒ€í™” ì¬ìƒ, ë‚ ì§œ ê·¸ë£¹í™”, ì¤‘ìš” ë¬¸êµ¬)
- [x] í•™ìŠµ í†µê³„ (ì—°ì† í•™ìŠµì¼, ì°¨íŠ¸, ì£¼ê°„/ì›”ê°„ ë·°)
- [x] ì‚¬ìš©ì í”„ë¡œí•„ ì‹œìŠ¤í…œ (ì•„ë°”íƒ€, í•™ìŠµ ëª©í‘œ, ê°œì¸í™”)
- [x] ë‚œì´ë„ë³„ AI ì‘ë‹µ ì¡°ì • (JLPT N5-N1, ì–´íœ˜ ë³µì¡ë„ ë¶„ì„)
- [x] ë¬¸ë²• ì„¤ëª… ê¸°ëŠ¥ (ìƒ‰ìƒ êµ¬ë¬¸ ê°•ì¡°, í•œêµ­ì–´ ì„¤ëª…, ëŒ€í™” ì˜ˆì‹œ)
- [x] ë¬¸ë²• ìºì‹± (ì¦‰ì‹œ ì¬ë¡œë”©)
- [x] ë©”ì‹œì§€ë³„ í•œêµ­ì–´ ë²ˆì—­ ë²„íŠ¼
- [x] ëŒ€í™” ì¢…ë£Œ ë° íˆìŠ¤í† ë¦¬ ê´€ë¦¬
- [x] TTS ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜
- [x] ëŒ€í™” ì´ë ¥ ë³´ì¡´ (ë„¤ë¹„ê²Œì´ì…˜ ì‹œ)
- [x] ìŠ¤ë§ˆíŠ¸ ëŒ€í™” ìƒì„± (ë¹ˆ ëŒ€í™” ë°©ì§€)

### ğŸ“… Phase 4: ì¶”ê°€ ê¸°ëŠ¥ (ê³„íš)
- [ ] ë°œìŒ í‰ê°€ (STT ì •í™•ë„ ë¶„ì„)
- [ ] í”Œë˜ì‹œì¹´ë“œ ìƒì„± (ì¤‘ìš” ë¬¸êµ¬ì—ì„œ)
- [ ] í€´ì¦ˆ ëª¨ë“œ
- [ ] ëª©í‘œ ì„¤ì • ë° ì•Œë¦¼
- [ ] ì†Œì…œ ê³µìœ  ê¸°ëŠ¥

## ğŸ§ª í…ŒìŠ¤íŠ¸

```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
./gradlew test

# UI í…ŒìŠ¤íŠ¸
./gradlew connectedAndroidTest

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test --tests "*.ChatViewModelTest"
```

## ğŸ“‚ ì£¼ìš” íŒŒì¼ êµ¬ì¡°

### Domain Layer (`domain/model/`)
- **User.kt**: ì‚¬ìš©ì ì—”í‹°í‹° (Room @Entity, avatarId, learningGoal, level)
- **Scenario.kt**: ì‹œë‚˜ë¦¬ì˜¤ í…œí”Œë¦¿ (ì œëª©, ì„¤ëª…, ë‚œì´ë„, ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸)
- **Conversation.kt**: ëŒ€í™” ì„¸ì…˜ (userId, scenarioId, isCompleted)
- **Message.kt**: ê°œë³„ ë©”ì‹œì§€ (content, isUser, timestamp, complexityScore)
- **Hint.kt**: AI íŒíŠ¸ (japanese, korean, romaji, explanation)
- **GrammarExplanation.kt**: ë¬¸ë²• ë¶„ì„ (components, overallExplanation, examples, relatedPatterns)
- **GrammarComponent.kt**: ë¬¸ë²• ìš”ì†Œ (text, type, explanation, startIndex, endIndex)
- **GrammarType.kt**: ë¬¸ë²• íƒ€ì… enum (PARTICLE, VERB, ADJECTIVE, etc.)
- **UserSettings.kt**: ì‚¬ìš©ì ì„¤ì • (difficulty, speechSpeed, autoSpeak, showRomaji)

### Data Layer
#### Local (`data/local/`)
- **NihongoDatabase.kt**: Room ë°ì´í„°ë² ì´ìŠ¤ (4ê°œ DAO, Schema v2)
  - `MIGRATION_1_2`: isCompleted ì»¬ëŸ¼ ì¶”ê°€ ë§ˆì´ê·¸ë ˆì´ì…˜
- **UserDao.kt, ScenarioDao.kt, ConversationDao.kt, MessageDao.kt**: ë°ì´í„° ì ‘ê·¼ ì¸í„°í˜ì´ìŠ¤
  - `getLatestActiveConversationByUserAndScenario()`: í™œì„± ëŒ€í™” ì¡°íšŒ
  - `getCompletedConversationsByUserAndScenario()`: ì™„ë£Œëœ ëŒ€í™” ì¡°íšŒ
- **SettingsDataStore.kt**: DataStore Preferences ê´€ë¦¬
- **DataInitializer.kt**: 6ê°€ì§€ ê¸°ë³¸ ì‹œë‚˜ë¦¬ì˜¤ ì´ˆê¸°í™”

#### Remote (`data/remote/`)
- **GeminiApiService.kt**: Gemini 2.5 Flash API í´ë¼ì´ì–¸íŠ¸
  - `sendMessage()`: AI ëŒ€í™” ìƒì„±
  - `generateHints()`: ë¬¸ë§¥ ê¸°ë°˜ íŒíŠ¸ ìƒì„± (JSON íŒŒì‹±)

#### Repository (`data/repository/`)
- **ConversationRepository.kt**: í†µí•© ë°ì´í„° ê´€ë¦¬
  - Room DB + Gemini API í†µí•©
  - Flow ê¸°ë°˜ ë¦¬ì•¡í‹°ë¸Œ ë°ì´í„°
  - `getOrCreateConversation()`: ëŒ€í™” ì„¸ì…˜ ë³µì› ë˜ëŠ” ìƒì„±
  - `completeConversation()`: ëŒ€í™” ì¢…ë£Œ ë° íˆìŠ¤í† ë¦¬ ì €ì¥
  - `translateToKorean()`: ì¼ë³¸ì–´ â†’ í•œêµ­ì–´ ë²ˆì—­
- **StatsRepository.kt**: í•™ìŠµ í†µê³„ ê³„ì‚°
  - ì¼ì¼/ì£¼ê°„/ì›”ê°„ í†µê³„
  - ì—°ì† í•™ìŠµì¼ ì¶”ì 
  - ì‹œë‚˜ë¦¬ì˜¤ë³„ ì§„í–‰ë¥ 
  - í•™ìŠµ ì‹œê°„ ì¶”ì •

### Presentation Layer
#### Chat (`presentation/chat/`)
- **ChatScreen.kt**: ë©”ì¸ ì±„íŒ… UI (360+ lines)
  - ChatScreen, MessageBubble, MessageInput composables
  - AnimatedVisibility, íƒ€ì„ìŠ¤íƒ¬í”„, ì—ëŸ¬ í‘œì‹œ
  - ëŒ€í™” ì¢…ë£Œ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
  - ë©”ì‹œì§€ë³„ ë²ˆì—­ ë²„íŠ¼
- **ChatViewModel.kt**: ì±„íŒ… ìƒíƒœ ê´€ë¦¬
  - ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹ , ìŒì„± ì´ë²¤íŠ¸, íŒíŠ¸ ìš”ì²­
  - Settings ê´€ì°° ë° VoiceManager ì—°ë™
  - `confirmEndChat()`: ëŒ€í™” ì¢…ë£Œ ë° ìƒíƒœ ì´ˆê¸°í™”
  - `toggleMessageTranslation()`: ë©”ì‹œì§€ë³„ ë²ˆì—­ í† ê¸€
  - `requestGrammarExplanation()`: ë¬¸ë²• ì„¤ëª… (ìºì‹± ì§€ì›)
- **TypingIndicator.kt**: 3-dot í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜
- **VoiceButton.kt**: ë§ˆì´í¬ ë²„íŠ¼ + í„ìŠ¤ íš¨ê³¼
- **HintDialog.kt**: íŒíŠ¸ ì¹´ë“œ ë¦¬ìŠ¤íŠ¸ ë‹¤ì´ì–¼ë¡œê·¸
- **VoiceStateIndicator.kt**: ìŒì„± ìƒíƒœ í‘œì‹œ

#### Scenario (`presentation/scenario/`)
- **ScenarioListScreen.kt**: ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ í™”ë©´
  - ScenarioCard, DifficultyBadge, ì•„ì´ì½˜ ë§¤í•‘
- **ScenarioViewModel.kt**: ì‹œë‚˜ë¦¬ì˜¤ ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬

#### Settings (`presentation/settings/`)
- **SettingsScreen.kt**: ì„¤ì • UI
  - DifficultySlider, SpeechSpeedSlider, SettingsToggle
  - ì„¹ì…˜ë³„ ë ˆì´ì•„ì›ƒ (Material 3)
- **SettingsViewModel.kt**: ì„¤ì • ìƒíƒœ ê´€ë¦¬ (DataStore ì—°ë™)

#### Review (`presentation/review/`)
- **ReviewScreen.kt**: ë³µìŠµ ëª¨ë“œ UI (480+ lines)
  - ë‚ ì§œë³„ ëŒ€í™” ê·¸ë£¹í™”
  - í™•ì¥ ê°€ëŠ¥ ëŒ€í™” ì¹´ë“œ
  - ì¤‘ìš” ë¬¸êµ¬ ì¶”ì¶œ ë° ì¬ìƒ
- **ReviewViewModel.kt**: ë³µìŠµ ìƒíƒœ ê´€ë¦¬
  - ëŒ€í™” ë¡œë”© ë° ê·¸ë£¹í™”
  - ì¤‘ìš” ë¬¸êµ¬ ì¶”ì¶œ ë¡œì§
  - TTS ì¬ìƒ ì œì–´

#### Stats (`presentation/stats/`)
- **StatsScreen.kt**: í†µê³„ ëŒ€ì‹œë³´ë“œ UI (450+ lines)
  - ì—°ì† í•™ìŠµì¼ ì¹´ë“œ
  - ì´ê³„ í†µê³„ (íšŒí™”/ë©”ì‹œì§€/ì‹œê°„)
  - ì£¼ê°„/ì›”ê°„ ë·° í† ê¸€
- **StatsViewModel.kt**: í†µê³„ ìƒíƒœ ê´€ë¦¬
  - StatsRepository ì—°ë™
  - ê¸°ê°„ë³„ ë°ì´í„° í•„í„°ë§
- **Charts.kt**: ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸ (320+ lines)
  - BarChart (ë§‰ëŒ€ ì°¨íŠ¸)
  - LineChart (ì„  ì°¨íŠ¸)
  - PieChart (íŒŒì´ ì°¨íŠ¸)
  - ChartLegend, StatCard

#### Navigation (`presentation/navigation/`)
- **NihongoNavHost.kt**: Navigation Compose ë¼ìš°íŒ…
  - ScenarioList (ì‹œì‘) â†’ Chat / Settings / Stats / Review
- **Screen.kt**: ë¼ìš°íŠ¸ ì •ì˜

### Core Layer (`core/`)
#### DI (`core/di/`)
- **DatabaseModule.kt**: Room DB Hilt ì œê³µ
- **AppModule.kt**: Context, Gemini API Hilt ì œê³µ
- **VoiceModule.kt**: VoiceManager Singleton ì œê³µ

#### Voice (`core/voice/`)
- **VoiceManager.kt**: STT/TTS í†µí•© ê´€ë¦¬
  - Android SpeechRecognizer (ì¼ë³¸ì–´ ja-JP)
  - TextToSpeech (ì†ë„ ì œì–´ 0.5x-2.0x, ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜)
  - Pending queue ì‹œìŠ¤í…œ (ë¹„ë™ê¸° ì´ˆê¸°í™” ë¬¸ì œ í•´ê²°)
  - StateFlow ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
  - `retryTtsInitialization()`: TTS ì¬ì´ˆê¸°í™” í•¨ìˆ˜
- **VoiceState.kt**: Idle, Listening, Speaking ìƒíƒœ
- **VoiceEvent.kt**: RecognitionResult, Error, SpeakingComplete ì´ë²¤íŠ¸

#### Util (`core/util/`)
- **Result.kt**: Success/Error/Loading sealed class

### Application (`NihongoApp.kt`)
- Hilt Application ì§„ì…ì 
- DataInitializerë¡œ ê¸°ë³¸ ì‹œë‚˜ë¦¬ì˜¤ ì‚½ì…

**ì´ íŒŒì¼ ìˆ˜**: 40+ Kotlin íŒŒì¼ (Review ëª¨ë“œ +2, Stats ëŒ€ì‹œë³´ë“œ +4, ê¸°ì¡´ 30+)

## ğŸ”‘ í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸

### 1. Gemini API í†µí•© + í…ìŠ¤íŠ¸ ì •ì œ
```kotlin
// GeminiApiService.kt
val generativeModel = GenerativeModel(
    modelName = "gemini-2.5-flash",
    apiKey = BuildConfig.GEMINI_API_KEY
)

// ëŒ€í™” íˆìŠ¤í† ë¦¬ë¥¼ í¬í•¨í•œ ì»¨í…ìŠ¤íŠ¸ ì „ë‹¬
val chat = generativeModel.startChat(history = conversationHistory)
val response = chat.sendMessage(userMessage)

// ğŸ†• ì‘ë‹µ í…ìŠ¤íŠ¸ ìë™ ì •ì œ
private fun cleanResponseText(text: String): String {
    return text
        .replace(Regex("\\*\\*([^*]+)\\*\\*"), "$1")  // **êµµê²Œ** ì œê±°
        .replace(Regex("(?<!\\*)\\*([^*]+)\\*(?!\\*)"), "$1")  // *ê¸°ìš¸ì„* ì œê±°
        .replace(Regex("ï¼ˆ[^ï¼‰]*ï¼‰"), "")  // ï¼ˆí›„ë¦¬ê°€ë‚˜ï¼‰ ì œê±°
        .replace(Regex("\\([^)]*\\)"), "")  // (furigana) ì œê±°
}
```

### 2. ë¦¬ì•¡í‹°ë¸Œ Settings ë™ê¸°í™”
```kotlin
// ChatViewModelì—ì„œ Settings ê´€ì°°
private fun observeSettings() {
    viewModelScope.launch {
        settingsDataStore.userSettings.collect { settings ->
            _uiState.update {
                it.copy(
                    autoSpeak = settings.autoSpeak,
                    speechSpeed = settings.speechSpeed
                )
            }
            voiceManager.setSpeechSpeed(settings.speechSpeed)
        }
    }
}
```

### 3. ìŒì„± ì¸ì‹/ì¬ìƒ ìƒíƒœ ê´€ë¦¬ + TTS ê°œì„ 
```kotlin
// VoiceManager.kt - StateFlow ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
private val _state = MutableStateFlow<VoiceState>(VoiceState.Idle)
val state: StateFlow<VoiceState> = _state.asStateFlow()

// ğŸ†• Pending Queue ì‹œìŠ¤í…œ (ë¹„ë™ê¸° ì´ˆê¸°í™” ë¬¸ì œ í•´ê²°)
private val pendingSpeechQueue = mutableListOf<PendingSpeech>()

fun speak(text: String, speed: Float = 1.0f) {
    // í›„ë¦¬ê°€ë‚˜ ìë™ ì œê±°
    val cleanText = text.replace(Regex("ï¼ˆ[^ï¼‰]*ï¼‰|\\([^)]*\\)"), "").trim()

    if (!isTtsInitialized) {
        // TTS ì¤€ë¹„ ì „ - íì— ì €ì¥
        synchronized(pendingSpeechQueue) {
            pendingSpeechQueue.add(PendingSpeech(cleanText, utteranceId, speed))
        }
        return
    }

    // TTS ì¤€ë¹„ ì™„ë£Œ - ì¦‰ì‹œ ì¬ìƒ
    textToSpeech?.speak(cleanText, TextToSpeech.QUEUE_FLUSH, null, utteranceId)
}

// ì´ˆê¸°í™” ì™„ë£Œ ì‹œ í ì²˜ë¦¬
private fun initializeTts() {
    textToSpeech = TextToSpeech(context) { status ->
        if (status == TextToSpeech.SUCCESS) {
            // ì¼ë³¸ì–´ ì„¤ì • ë° ì¤€ë¹„ ì™„ë£Œ
            isTtsInitialized = true

            // ğŸ†• ëŒ€ê¸° ì¤‘ì¸ ìŒì„± ì¬ìƒ
            synchronized(pendingSpeechQueue) {
                pendingSpeechQueue.forEach { pending ->
                    textToSpeech?.speak(pending.text, ...)
                }
                pendingSpeechQueue.clear()
            }
        }
    }
}

// UIì—ì„œ ìƒíƒœ êµ¬ë…
val voiceState by viewModel.voiceState.collectAsState()
```

### 4. AI íŒíŠ¸ ìƒì„± (JSON íŒŒì‹±)
```kotlin
// GeminiApiService.kt
suspend fun generateHints(conversationHistory: List<Message>): List<Hint> {
    val prompt = """
    Based on this conversation, suggest 3 helpful Japanese phrases...
    Return ONLY a JSON array with this exact format:
    [{"japanese": "...", "korean": "...", "romaji": "...", "explanation": "..."}]
    """

    val response = generativeModel.generateContent(prompt)
    // JSON íŒŒì‹± with fallback hints
}
```

### 5. Compose ì• ë‹ˆë©”ì´ì…˜ ìµœì í™”
```kotlin
// TypingIndicator.kt - rememberë¡œ ì• ë‹ˆë©”ì´ì…˜ ì¸ìŠ¤í„´ìŠ¤ ì¬ì‚¬ìš©
val infiniteTransition = rememberInfiniteTransition(label = "typing")

// ChatScreen.kt - í‚¤ ê¸°ë°˜ ì•„ì´í…œ ì¶”ì ìœ¼ë¡œ ì¬ì¡°í•© ìµœì†Œí™”
items(items = uiState.messages, key = { it.id }) { message ->
    AnimatedVisibility(...)
}
```

### 6. DataStore Preferences íŒ¨í„´
```kotlin
// SettingsDataStore.kt
private val Context.dataStore: DataStore<Preferences>
    by preferencesDataStore(name = "settings")

val userSettings: Flow<UserSettings> = context.dataStore.data
    .catch { if (it is IOException) emit(emptyPreferences()) }
    .map { preferences ->
        UserSettings(
            difficultyLevel = preferences[DIFFICULTY_LEVEL] ?: 1,
            speechSpeed = preferences[SPEECH_SPEED] ?: 1.0f,
            // ...
        )
    }
```

### 7. Room ê´€ê³„í˜• ì¿¼ë¦¬
```kotlin
// ConversationDao.kt
@Query("""
    SELECT * FROM conversations
    WHERE userId = :userId
    ORDER BY createdAt DESC
""")
fun getConversationsByUser(userId: Long): Flow<List<Conversation>>

// MessageDao.kt - Foreign Key ê´€ê³„
@Entity(
    foreignKeys = [ForeignKey(
        entity = Conversation::class,
        parentColumns = ["id"],
        childColumns = ["conversationId"],
        onDelete = ForeignKey.CASCADE
    )]
)
```

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê°œì¸ í”„ë¡œì íŠ¸ì´ì§€ë§Œ í”¼ë“œë°±ê³¼ ì œì•ˆì€ í™˜ì˜í•©ë‹ˆë‹¤!

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License - ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì„¸ìš”

## ğŸ“® ì—°ë½ì²˜

- Email: your.email@example.com
- Project Link: [https://github.com/yourusername/nihongo-conversation](https://github.com/yourusername/nihongo-conversation)

## ğŸ™ ê°ì‚¬ì˜ ë§

- Google Gemini Team - ê°•ë ¥í•œ AI API ì œê³µ
- Android Jetpack Team - í˜„ëŒ€ì ì¸ Android ê°œë°œ ë„êµ¬
- ì¼ë³¸ì–´ í•™ìŠµ ì»¤ë®¤ë‹ˆí‹° - í”¼ë“œë°±ê³¼ ì•„ì´ë””ì–´

---

**Note**: ì´ ì•±ì€ ê°œì¸ í•™ìŠµìš©ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ìƒì—…ì  ì‚¬ìš© ì‹œ Gemini API ë¼ì´ì„ ìŠ¤ë¥¼ í™•ì¸í•˜ì„¸ìš”.