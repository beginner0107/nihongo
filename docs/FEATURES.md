# 🌟 주요 기능

## 🤖 AI 대화 시스템
- **AI 대화 파트너**: Gemini 2.5 Flash를 활용한 자연스러운 일본어 대화
- **맥락 기억**: 이전 대화를 기억하고 관계를 이어가는 친구 같은 AI
- **AI 힌트 시스템**: 한국어-일본어 번역 힌트, 로마자 표기, 문맥 기반 제안
- **메시지 컨텍스트 메뉴**: 길게 누르기로 복사/읽기/문법 분석/번역 기능 접근, 외부 앱 연동 가능
- **문법 설명 기능**: 메시지 길게 누르기로 즉시 문법 분석, 색상별 구문 강조, 캐싱으로 즉시 재로딩
- **메시지별 번역**: 각 AI 메시지마다 한국어 번역 버튼, 선택적 번역 확인

## ✨ 실시간 AI 피드백 시스템 (NEW!)
- **문법 오류 감지**: 자동 문법 오류 탐지 및 수정 제안
- **자연스러운 표현 제안**: 직역체 감지 및 네이티브스러운 대안 제안
- **대화 흐름 분석**: 맥락에 맞는 표현 확인 및 대화 전략 제안
- **경어 레벨 조정**: 상황에 맞는 존댓말/반말 사용 피드백
- **실수 패턴 추적**: 반복되는 문법 실수 추적 및 개인화된 약점 분석
- **피드백 카드**: 5가지 타입 (문법 오류, 부자연스러운 표현, 더 나은 표현, 대화 흐름, 경어 레벨)

## 🎯 목표 기반 롤플레이 시나리오 (NEW!)
- **6가지 태스크 기반 시나리오**:
  - 就職面接 (취업 면접): 자기소개, 지원동기 설명, 질문 대응
  - クレーム対応 (클레임 대응): 정중한 사과, 문제 해결, 보상 제안
  - 緊急事態 (응급 상황): 위치 설명, 증상 전달, 도움 요청
  - デートの誘い (데이트 신청): 관계 구축, 데이트 제안, 거절 대응
  - ビジネスプレゼン (비즈니스 프레젠테이션): 아이디어 설명, 질문 대응
  - 彼女との会話 (여자친구와의 대화): 3가지 분기 (화해/기념일/미래계획)
- **명확한 목표**: 각 시나리오별 달성 목표 (키워드 도달, 경어 유지, 시간 제한 등)
- **성공 기준**: 점수 기반 평가 및 다양한 엔딩 (완벽, 성공, 부분성공, 실패)
- **대화 분기**: 사용자 선택에 따라 다른 반응 및 여러 엔딩
- **리플레이 가치**: 다양한 선택지로 반복 학습 가능

## 🎤 음성 전용 모드 (NEW!)
- **텍스트 완전 숨김**: 입출력 텍스트 완전 비활성화
- **음성만으로 대화**: 실제 대화 상황 시뮬레이션
- **시각적 큐**: 말하기/듣기 상태를 위한 애니메이션 인디케이터
- **대화 타이머**: 목표 시간 설정 (기본 5분) 및 진행률 표시
- **대화 후 전사 검토**: 음성 전용 세션 완료 후 전체 대화 텍스트 확인
- **5가지 음성 상태**: IDLE, LISTENING, PROCESSING, SPEAKING, THINKING

## 🗣️ 향상된 발음 연습 (NEW!)
- **피치 액센트 분석 (高低アクセント)**:
  - 모라별 피치 패턴 분석 (H/L)
  - 4가지 액센트 타입 분류 (平板, 頭高, 中高, 尾高)
  - 피치 곡선 그래프 시각화
  - 네이티브 패턴과 비교
- **억양 패턴 분석 (イントネーション)**:
  - 문장 타입 인식 (평서문, 의문문, 감탄문, 명령문)
  - 문말 상승/하강 감지
  - 문장 레벨 피치 곡선
  - 상황별 개선 제안
- **속도/리듬 분석**:
  - 말하기 속도 평가 (遅すぎる ~ 速すぎる)
  - 모라 타이밍 일관성 측정
  - 네이티브 스피커와 DTW 비교
  - 자연스러움 점수 (0-100)
- **문제 음소 감지**:
  - 10가지 일반적 발음 문제 (ら行, つ/ちゅ, 長音, 促音, ん, は/を, が/んが, し/ち, つ/す, ふ)
  - 심각도 레벨 (중대, 높음, 중간, 낮음)
  - 구체적인 개선 제안 및 네이티브 예시
  - 최소 쌍(minimal pairs) 연습
- **6차원 발음 점수**: 정확성, 피치, 억양, 리듬, 명료성, 자연스러움
- **등급 시스템**: 초심자 → 네이티브 레벨 (6단계)

## 📚 문장 카드 시스템 (단어 플래시카드 업그레이드!)
- **실제 대화에서 추출한 전체 문장**: 단어가 아닌 완전한 문장으로 학습
- **문맥 정보**: 대화 ID, 시나리오 제목, 이전 메시지 포함
- **문법 패턴 학습**: 〜てください, 〜ことができる 등 10+ 패턴 자동 추출
- **각 문장마다 오디오**: 네이티브 발음 오디오 지원
- **4가지 연습 모드**:
  - 읽기 모드: 문장 보고 의미 회상
  - 듣기 모드: 오디오 듣고 타이핑
  - 빈칸 채우기: 조사, 동사, 패턴 빈칸 연습
  - 말하기 모드: 번역 보고 일본어로 말하기
- **빈칸 채우기 생성기**:
  - 자동 조사 빈칸 (は, が, を, に, で)
  - 동사 탐지 및 빈칸
  - 문법 패턴 빈칸
  - 힌트 및 오답 선택지 생성
- **SM-2 간격 반복 알고리즘**: 최적 복습 스케줄링
- **연습 모드별 완료 추적**: 4가지 모드 각각 진행도 추적
- **패턴별 통계**: 강점/약점 문법 패턴 분석

## 🎙️ 음성 기능
- **STT**: 일본어 음성 인식, 재시도 메커니즘
- **TTS**: AI 응답 자동 재생, 속도 조절 (0.5x-2.0x)
- **발음 평가**: 0-100 정확도 점수, 레벤슈타인 거리 분석, 색상 피드백, 향상도 표시
- **발음 히스토리**: 전체 연습 기록, 약점 분석, 마스터 문구, 7일 추세 차트

## 📚 학습 관리
- **대화 관리**: 대화 종료 버튼, 히스토리 자동 저장, 새 대화 시작 기능
- **시나리오**: 6가지 기본 시나리오 + 6가지 목표 기반 시나리오 (초급/중급/상급)
- **대화 이력**: 전체 대화 검색/필터링, 상태별 보기, 빠른 재개, 삭제 관리
- **복습 모드**: 완료된 대화만 표시, 학습 통계, 중요 문구 추출, TTS 재생
- **학습 통계**: 일일/주간/월간 진도, 연속 학습일 추적, 시나리오별 진행률, 차트 시각화

## 📖 플래시카드 시스템
- **문장 카드**: 3D 카드 뒤집기 애니메이션, SM-2 알고리즘, 실시간 진행도
- **통계 대시보드**: 30일 캘린더 히트맵, 정확도 추세, 학습 스트릭, 개인 베스트
- **커스텀 추가**: 클립보드 임포트, 난이도 설정, 예문 추가, 즉시 복습 큐

## ⚙️ 설정 및 사용자
- **난이도 조절**: JLPT 레벨별 AI 응답 (N5-N4/N3-N2/N1), 어휘 복잡도 분석
- **사용자 프로필**: 아바타 선택, 학습 목표, 개인화된 AI 응답
- **멀티 유저**: DataStore 기반 세션 관리, 유저 선택 UI, 자동 로그인, 데이터 격리
- **UI/UX**: Material 3 디자인, 타이핑 인디케이터, 부드러운 애니메이션, 메시지 타임스탬프
